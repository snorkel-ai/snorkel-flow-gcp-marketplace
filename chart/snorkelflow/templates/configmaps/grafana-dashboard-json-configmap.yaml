apiVersion: v1
data:
  analyses_api_dashboard.json: '{"annotations":{"list":[{"builtIn":1,"datasource":"--
    Grafana --","enable":true,"hide":true,"iconColor":"rgba(0, 211, 255, 1)","name":"Annotations
    & Alerts","target":{"limit":100,"matchAny":false,"tags":[],"type":"dashboard"},"type":"dashboard"}]},"editable":true,"fiscalYearStartMonth":0,"gnetId":null,"graphTooltip":0,"id":11,"iteration":1658426381520,"links":[],"liveNow":false,"panels":[{"datasource":null,"fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisLabel":"","axisPlacement":"auto","barAlignment":0,"drawStyle":"line","fillOpacity":0,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"lineInterpolation":"linear","lineWidth":1,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"auto","spanNulls":false,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":80}]}},"overrides":[]},"gridPos":{"h":16,"w":17,"x":0,"y":0},"id":2,"options":{"legend":{"calcs":[],"displayMode":"list","placement":"bottom"},"tooltip":{"mode":"single"}},"targets":[{"query":"import
    \"strings\"\nimport \"regexp\"\nfrom(bucket: \"snorkel\")\n  |> range(start: v.timeRangeStart,
    stop: v.timeRangeStop)\n  |> filter(fn: (r) => r[\"host\"] =~ /^${hostname:regex}$/)\n  |>
    filter(fn: (r) => not exists r[\"instance_id\"] or r[\"instance_id\"] =~ /^${instance_id:regex}$/)\n  |>
    filter(fn: (r) => r[\"_measurement\"] == \"api_requests_all\")\n  |> filter(fn:
    (r) => r[\"path\"] =~ /^\\/api\\/.*\\/models\\/.*/)\n  |> filter(fn: (r) => r[\"method\"]
    == \"GET\")\n  |> filter(fn: (r) => r[\"status_code\"] == \"200\")\n  |> filter(fn:
    (r) => not strings.containsStr(v: r.path, substr: \"span\"))\n  |> filter(fn:
    (r) => not strings.containsStr(v: r.path, substr: \"predictions\"))\n  |> map(fn:
    (r) => ({\n    r with\n    api_namespace: strings.splitAfter(v: r.path, t: \"models\")[1]\n  }))\n  |>
    map(fn: (r) => ({\n    r with\n    newval: regexp.replaceAllString(r: /[0-9]+/,
    v: r.api_namespace, t: \"XXX\")\n  }))\n  |> map(fn: (r) => ({\n    _time: r._time,\n    _value:
    r._value,\n    _field: r.api_name + \": \" + r.method + \" \" + r.newval + \"
    \" + r.status_code,\n  }))\n  |> aggregateWindow(every: 1h, fn: sum)","refId":"A"}],"title":"Panel
    Title","type":"timeseries"},{"datasource":null,"fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"custom":{"align":"auto","displayMode":"auto"},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":80}]}},"overrides":[]},"gridPos":{"h":16,"w":17,"x":0,"y":16},"id":3,"options":{"showHeader":true},"pluginVersion":"8.2.6","targets":[{"query":"import
    \"strings\"\nimport \"regexp\"\nfrom(bucket: \"snorkel\")\n  |> range(start: v.timeRangeStart,
    stop: v.timeRangeStop)\n  |> filter(fn: (r) => r[\"host\"] =~ /^${hostname:regex}$/)\n  |>
    filter(fn: (r) => not exists r[\"instance_id\"] or r[\"instance_id\"] =~ /^${instance_id:regex}$/)\n  |>
    filter(fn: (r) => r[\"_measurement\"] == \"api_requests_all\")\n  |> filter(fn:
    (r) => r[\"path\"] =~ /^\\/api\\/.*\\/models\\/.*/)\n  |> filter(fn: (r) => r[\"method\"]
    == \"GET\")\n  |> filter(fn: (r) => r[\"status_code\"] == \"200\")\n  |> filter(fn:
    (r) => not strings.containsStr(v: r.path, substr: \"span\"))\n  |> filter(fn:
    (r) => not strings.containsStr(v: r.path, substr: \"predictions\"))\n  |> map(fn:
    (r) => ({\n    r with\n    api_namespace: strings.splitAfter(v: r.path, t: \"models\")[1]\n  }))\n  |>
    map(fn: (r) => ({\n    r with\n    newval: regexp.replaceAllString(r: /[0-9]+/,
    v: r.api_namespace, t: \"XXX\")\n  }))\n  |> map(fn: (r) => ({\n    _time: r._time,\n    _value:
    r._value,\n    _field: r.api_name + \": \" + r.method + \" \" + r.newval + \"
    \" + r.status_code,\n  }))\n  |> aggregateWindow(every: 1h, fn: sum)","refId":"A"}],"title":"Panel
    Title","transformations":[{"id":"reduce","options":{"reducers":["sum"]}}],"type":"table"}],"refresh":"","schemaVersion":32,"style":"dark","tags":[],"templating":{"list":[{"allValue":null,"current":{"selected":false,"text":"edge.k8s.g498.io","value":"edge.k8s.g498.io"},"datasource":null,"definition":"import
    \"influxdata/influxdb/v1\"\nv1.tagValues(\n    bucket: v.bucket,\n    tag: \"host\",\n    predicate:
    (r) => true,\n    start: -1y\n)","description":null,"error":null,"hide":0,"includeAll":false,"label":null,"multi":false,"name":"hostname","options":[],"query":"import
    \"influxdata/influxdb/v1\"\nv1.tagValues(\n    bucket: v.bucket,\n    tag: \"host\",\n    predicate:
    (r) => true,\n    start: -1y\n)","refresh":1,"regex":"","skipUrlSync":false,"sort":0,"type":"query"},{"allValue":null,"current":{"selected":false,"text":"60f4e099-46e4-4e34-84dd-52795f31a514","value":"60f4e099-46e4-4e34-84dd-52795f31a514"},"datasource":null,"definition":"import
    \"influxdata/influxdb/v1\"\nv1.tagValues(\n    bucket: v.bucket,\n    tag: \"instance_id\",\n    predicate:
    (r) => true,\n    start: -1y\n)","description":null,"error":null,"hide":0,"includeAll":false,"label":null,"multi":false,"name":"instance_id","options":[],"query":"import
    \"influxdata/influxdb/v1\"\nv1.tagValues(\n    bucket: v.bucket,\n    tag: \"instance_id\",\n    predicate:
    (r) => true,\n    start: -1y\n)","refresh":1,"regex":"","skipUrlSync":false,"sort":0,"type":"query"},{"allValue":null,"current":{"selected":true,"tags":[],"text":["All"],"value":["$__all"]},"datasource":"influxdb","hide":0,"includeAll":true,"label":null,"multi":true,"name":"hostname","options":[],"query":"import
    \"influxdata/influxdb/v1\"\nv1.tagValues(\n    bucket: v.bucket,\n    tag: \"host\",\n    predicate:
    (r) => true,\n    start: -1y\n)","refresh":1,"regex":"","skipUrlSync":false,"sort":1,"tagValuesQuery":"","tags":[],"tagsQuery":"","type":"query","useTags":false},{"allValue":null,"current":{"selected":true,"tags":[],"text":["All"],"value":["$__all"]},"datasource":"influxdb","hide":0,"includeAll":true,"label":null,"multi":true,"name":"instance_id","options":[],"query":"import
    \"influxdata/influxdb/v1\"\nv1.tagValues(\n    bucket: v.bucket,\n    tag: \"instance_id\",\n    predicate:
    (r) => true,\n    start: -1y\n)","refresh":1,"regex":"","skipUrlSync":false,"sort":1,"tagValuesQuery":"","tags":[],"tagsQuery":"","type":"query","useTags":false}]},"time":{"from":"now-7d","to":"now"},"timezone":"","title":"Analyses
    API Dashboard","uid":"lJBWuJR4z","version":10}'
  analysis_dashboard.json: '{"annotations":{"list":[{"builtIn":1,"datasource":"--
    Grafana --","enable":true,"hide":true,"iconColor":"rgba(0, 211, 255, 1)","name":"Annotations
    & Alerts","type":"dashboard"}]},"editable":true,"gnetId":null,"graphTooltip":0,"links":[],"panels":[{"bars":false,"dashLength":10,"dashes":false,"datasource":null,"description":"","fill":1,"fillGradient":0,"gridPos":{"h":8,"w":12,"x":0,"y":0},"hiddenSeries":false,"id":2,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.5.12","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"orderByTime":"ASC","policy":"default","query":"from(bucket:
    \"snorkel\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |>
    filter(fn: (r) => r[\"host\"] =~ /^${hostname:regex}$/)\n  |> filter(fn: (r) =>
    not exists r[\"instance_id\"] or r[\"instance_id\"] =~ /^${instance_id:regex}$/)\n  |>
    filter(fn: (r) => r[\"_measurement\"] == \"api_requests_latency\")\n  |> filter(fn:
    (r) => r[\"_field\"] == \"99.9_percentile\")\n  |> filter(fn: (r) => r[\"api_name\"]
    == \"Snorkel TDM\")\n  |> filter(fn: (r) => r[\"path\"] == \"/tasks/NNN/metrics\")\n  |>
    map(fn: (r) => ({\n    _field: r.api_name + \": \" + r.method + \" \" + r.path
    + \" \" + r.status_code,\n    _time: r._time,\n    _value: r._value\n  }))","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"tags":[]}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Model
    score lookup latency","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"$$hashKey":"object:224","decimals":null,"format":"ms","label":"","logBase":1,"max":null,"min":null,"show":true},{"$$hashKey":"object:225","format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}}],"schemaVersion":26,"style":"dark","tags":[],"templating":{"list":[{"allValue":null,"current":{"selected":true,"tags":[],"text":["All"],"value":["$__all"]},"datasource":"influxdb","hide":0,"includeAll":true,"label":null,"multi":true,"name":"hostname","options":[],"query":"import
    \"influxdata/influxdb/v1\"\nv1.tagValues(\n    bucket: v.bucket,\n    tag: \"host\",\n    predicate:
    (r) => true,\n    start: -1y\n)","refresh":1,"regex":"","skipUrlSync":false,"sort":1,"tagValuesQuery":"","tags":[],"tagsQuery":"","type":"query","useTags":false},{"allValue":null,"current":{"selected":true,"tags":[],"text":["All"],"value":["$__all"]},"datasource":"influxdb","hide":0,"includeAll":true,"label":null,"multi":true,"name":"instance_id","options":[],"query":"import
    \"influxdata/influxdb/v1\"\nv1.tagValues(\n    bucket: v.bucket,\n    tag: \"instance_id\",\n    predicate:
    (r) => true,\n    start: -1y\n)","refresh":1,"regex":"","skipUrlSync":false,"sort":1,"tagValuesQuery":"","tags":[],"tagsQuery":"","type":"query","useTags":false}]},"time":{"from":"now-6h","to":"now"},"timezone":"","title":"Analysis","uid":"SXXYgaAMz","version":4509}'
{{- if eq .Values.autoscaling.worker_autoscaling "1" }}
  autoscaling_dashboard.json: '{"__inputs":[],"annotations":{"list":[]},"description":"","editable":true,"gnetId":null,"hideControls":false,"id":null,"links":[],"panels":[{"cacheTimeout":null,"datasource":null,"description":"Displays
    the current PodDisruptionBudget setting that is applied globally to all deployments
    in OVERNIGHT_UNPINNED_DEPLOYMENTS, all other deployments are always pinned (e.g. max unavalable is set to 0). Setting max unavailable to 1 means pods can be moved
    to different nodes to enable binpacking, setting it to 0 pins it to the node it''s
    currently running on.","editable":true,"error":false,"fieldConfig":{"defaults":{"thresholds":{"mode":"absolute","steps":[]}}},"height":null,"gridPos":{"h":8,"w":12,"x":0,"y":0},"hideTimeOverride":false,"id":1,"interval":null,"links":[],"maxDataPoints":null,"minSpan":null,"repeat":null,"repeatDirection":null,"maxPerRow":null,"span":null,"targets":[{"query":"from(bucket:
    \"snorkel\")\n    |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n    |>
    filter(fn: (r) => r[\"_measurement\"] == \"autoscaler_pdb_max_unavailable\")\n    |>
    filter(fn: (r) => r[\"_field\"] == \"value\")\n    |> group(columns: [\"_measurement\"])\n    |>
    aggregateWindow(every: v.windowPeriod, fn: mean)","resultFormat":"time_series","alias":"","measurement":"","rawQuery":true,"refId":"A"}],"timeFrom":null,"timeShift":null,"title":"Kubernetes
    PodDisruptionBudget - Max Unavailable","transparent":false,"transformations":[],"aliasColors":{},"bars":false,"fill":0,"grid":{"threshold1":null,"threshold1Color":"rgba(216,
    200, 27, 0.27)","threshold2":null,"threshold2Color":"rgba(234, 112, 112, 0.22)"},"isNew":true,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false,"alignAsTable":false,"hideEmpty":false,"hideZero":false,"rightSide":false,"sideWidth":null,"sort":null,"sortDesc":false},"lines":true,"linewidth":2,"nullPointMode":"connected","options":{"dataLinks":[],"alertThreshold":true},"percentage":false,"pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"stack":false,"steppedLine":false,"tooltip":{"msResolution":true,"shared":true,"sort":0,"value_type":"individual"},"thresholds":[],"type":"graph","xaxis":{"mode":"time","name":null,"values":[],"show":true},"yaxes":[{"decimals":null,"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true},{"decimals":null,"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":0}},{"cacheTimeout":null,"datasource":null,"description":"For
    each of the worker deployments, displays amount of time that has elapsed since
    there were any new activity in any of the queues the worker follows","editable":true,"error":false,"fieldConfig":{"defaults":{"thresholds":{"mode":"absolute","steps":[]}}},"height":null,"gridPos":{"h":8,"w":12,"x":12,"y":0},"hideTimeOverride":false,"id":2,"interval":null,"links":[],"maxDataPoints":null,"minSpan":null,"repeat":null,"repeatDirection":null,"maxPerRow":null,"span":null,"targets":[{"query":"from(bucket:
    \"snorkel\")\n    |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n    |>
    filter(fn: (r) => r[\"_measurement\"] == \"autoscaler_deployment_time_since_activity\")\n    |>
    filter(fn: (r) => r[\"_field\"] == \"mean\")\n    |> group(columns: [\"deployment\"])\n    |>
    aggregateWindow(every: v.windowPeriod, fn: mean)","resultFormat":"time_series","alias":"","measurement":"","rawQuery":true,"refId":"A"}],"timeFrom":null,"timeShift":null,"title":"Time
    Since Deployment Activity","transparent":false,"transformations":[],"aliasColors":{},"bars":false,"fill":0,"grid":{"threshold1":null,"threshold1Color":"rgba(216,
    200, 27, 0.27)","threshold2":null,"threshold2Color":"rgba(234, 112, 112, 0.22)"},"isNew":true,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false,"alignAsTable":false,"hideEmpty":false,"hideZero":false,"rightSide":false,"sideWidth":null,"sort":null,"sortDesc":false},"lines":true,"linewidth":2,"nullPointMode":"connected","options":{"dataLinks":[],"alertThreshold":true},"percentage":false,"pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"stack":false,"steppedLine":false,"tooltip":{"msResolution":true,"shared":true,"sort":0,"value_type":"individual"},"thresholds":[],"type":"graph","xaxis":{"mode":"time","name":null,"values":[],"show":true},"yaxes":[{"decimals":null,"format":"ms","label":null,"logBase":1,"max":null,"min":null,"show":true},{"decimals":null,"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":0}},{"cacheTimeout":null,"datasource":null,"description":"For
    the ''Engine RQ'' workers, displays the replica limit and the counts of both the
    desired replicas (requested by autoscaler) and the active replicas (running in
    k8s)","editable":true,"error":false,"fieldConfig":{"defaults":{"thresholds":{"mode":"absolute","steps":[]}}},"height":null,"gridPos":{"h":8,"w":12,"x":0,"y":8},"hideTimeOverride":false,"id":3,"interval":null,"links":[],"maxDataPoints":null,"minSpan":null,"repeat":null,"repeatDirection":null,"maxPerRow":null,"span":null,"targets":[{"query":"from(bucket:
    \"snorkel\")\n    |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n    |>
    filter(fn: (r) => r[\"_measurement\"] == \"autoscaler_deployment_active_replicas\"
    or r[\"_measurement\"] == \"autoscaler_deployment_desired_replicas\" or r[\"_measurement\"]
    == \"autoscaler_deployment_replica_limit\")\n    |> filter(fn: (r) => r[\"deployment\"]
    == \"engine\")\n    |> filter(fn: (r) => r[\"_field\"] == \"value\")\n    |> group(columns:
    [\"_measurement\"])\n    |> aggregateWindow(every: v.windowPeriod, fn: mean)","resultFormat":"time_series","alias":"","measurement":"","rawQuery":true,"refId":"A"}],"timeFrom":null,"timeShift":null,"title":"Engine
    RQ Worker Autoscaling","transparent":false,"transformations":[],"aliasColors":{},"bars":false,"fill":0,"grid":{"threshold1":null,"threshold1Color":"rgba(216,
    200, 27, 0.27)","threshold2":null,"threshold2Color":"rgba(234, 112, 112, 0.22)"},"isNew":true,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false,"alignAsTable":false,"hideEmpty":false,"hideZero":false,"rightSide":false,"sideWidth":null,"sort":null,"sortDesc":false},"lines":true,"linewidth":2,"nullPointMode":"connected","options":{"dataLinks":[],"alertThreshold":true},"percentage":false,"pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"stack":false,"steppedLine":false,"tooltip":{"msResolution":true,"shared":true,"sort":0,"value_type":"individual"},"thresholds":[],"type":"graph","xaxis":{"mode":"time","name":null,"values":[],"show":true},"yaxes":[{"decimals":null,"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true},{"decimals":null,"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":0}},{"cacheTimeout":null,"datasource":null,"description":"For
    the ''Model Trainer RQ'' workers, displays the replica limit and the counts of
    both the desired replicas (requested by autoscaler) and the active replicas (running
    in k8s)","editable":true,"error":false,"fieldConfig":{"defaults":{"thresholds":{"mode":"absolute","steps":[]}}},"height":null,"gridPos":{"h":8,"w":12,"x":12,"y":8},"hideTimeOverride":false,"id":4,"interval":null,"links":[],"maxDataPoints":null,"minSpan":null,"repeat":null,"repeatDirection":null,"maxPerRow":null,"span":null,"targets":[{"query":"from(bucket:
    \"snorkel\")\n    |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n    |>
    filter(fn: (r) => r[\"_measurement\"] == \"autoscaler_deployment_active_replicas\"
    or r[\"_measurement\"] == \"autoscaler_deployment_desired_replicas\" or r[\"_measurement\"]
    == \"autoscaler_deployment_replica_limit\")\n    |> filter(fn: (r) => r[\"deployment\"]
    == \"model-trainer\")\n    |> filter(fn: (r) => r[\"_field\"] == \"value\")\n    |>
    group(columns: [\"_measurement\"])\n    |> aggregateWindow(every: v.windowPeriod,
    fn: mean)","resultFormat":"time_series","alias":"","measurement":"","rawQuery":true,"refId":"A"}],"timeFrom":null,"timeShift":null,"title":"Model
    Trainer RQ Worker Autoscaling","transparent":false,"transformations":[],"aliasColors":{},"bars":false,"fill":0,"grid":{"threshold1":null,"threshold1Color":"rgba(216,
    200, 27, 0.27)","threshold2":null,"threshold2Color":"rgba(234, 112, 112, 0.22)"},"isNew":true,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false,"alignAsTable":false,"hideEmpty":false,"hideZero":false,"rightSide":false,"sideWidth":null,"sort":null,"sortDesc":false},"lines":true,"linewidth":2,"nullPointMode":"connected","options":{"dataLinks":[],"alertThreshold":true},"percentage":false,"pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"stack":false,"steppedLine":false,"tooltip":{"msResolution":true,"shared":true,"sort":0,"value_type":"individual"},"thresholds":[],"type":"graph","xaxis":{"mode":"time","name":null,"values":[],"show":true},"yaxes":[{"decimals":null,"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true},{"decimals":null,"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":0}},{"cacheTimeout":null,"datasource":null,"description":"For
    the ''Engine Ray'' workers, displays the replica limit and the counts of both
    the desired replicas (requested by autoscaler) and the active replicas (running
    in k8s)","editable":true,"error":false,"fieldConfig":{"defaults":{"thresholds":{"mode":"absolute","steps":[]}}},"height":null,"gridPos":{"h":8,"w":12,"x":0,"y":16},"hideTimeOverride":false,"id":5,"interval":null,"links":[],"maxDataPoints":null,"minSpan":null,"repeat":null,"repeatDirection":null,"maxPerRow":null,"span":null,"targets":[{"query":"from(bucket:
    \"snorkel\")\n    |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n    |>
    filter(fn: (r) => r[\"_measurement\"] == \"autoscaler_deployment_active_replicas\"
    or r[\"_measurement\"] == \"autoscaler_deployment_desired_replicas\" or r[\"_measurement\"]
    == \"autoscaler_deployment_replica_limit\")\n    |> filter(fn: (r) => r[\"deployment\"]
    == \"ray-worker\")\n    |> filter(fn: (r) => r[\"_field\"] == \"value\")\n    |>
    group(columns: [\"_measurement\"])\n    |> aggregateWindow(every: v.windowPeriod,
    fn: mean)","resultFormat":"time_series","alias":"","measurement":"","rawQuery":true,"refId":"A"}],"timeFrom":null,"timeShift":null,"title":"Engine
    Ray Worker Autoscaling","transparent":false,"transformations":[],"aliasColors":{},"bars":false,"fill":0,"grid":{"threshold1":null,"threshold1Color":"rgba(216,
    200, 27, 0.27)","threshold2":null,"threshold2Color":"rgba(234, 112, 112, 0.22)"},"isNew":true,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false,"alignAsTable":false,"hideEmpty":false,"hideZero":false,"rightSide":false,"sideWidth":null,"sort":null,"sortDesc":false},"lines":true,"linewidth":2,"nullPointMode":"connected","options":{"dataLinks":[],"alertThreshold":true},"percentage":false,"pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"stack":false,"steppedLine":false,"tooltip":{"msResolution":true,"shared":true,"sort":0,"value_type":"individual"},"thresholds":[],"type":"graph","xaxis":{"mode":"time","name":null,"values":[],"show":true},"yaxes":[{"decimals":null,"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true},{"decimals":null,"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":0}},{"cacheTimeout":null,"datasource":null,"description":"For
    each of the autoscaled deployments, displays the diff (desired - active) of the
    replica counts, and alerts if the discrepancy is > 0 or < 0 for an extended period
    of time","editable":true,"error":false,"fieldConfig":{"defaults":{"thresholds":{"mode":"absolute","steps":[]}}},"height":null,"gridPos":{"h":8,"w":12,"x":12,"y":16},"hideTimeOverride":false,"id":6,"interval":null,"links":[],"maxDataPoints":null,"minSpan":null,"repeat":null,"repeatDirection":null,"maxPerRow":null,"span":null,"targets":[{"query":"active_replicas
    = from(bucket: \"snorkel\")\n    |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n    |>
    filter(fn: (r) => r[\"_measurement\"] == \"autoscaler_deployment_active_replicas\")\n\ndesired_replicas
    = from(bucket: \"snorkel\")\n    |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n    |>
    filter(fn: (r) => r[\"_measurement\"] == \"autoscaler_deployment_desired_replicas\")\n\nactive_desired_joined
    = join(\n    tables: {\n        active_replicas:active_replicas,\n        desired_replicas:desired_replicas\n    },\n    on:
    [\"_time\", \"deployment\"]\n)\n\nactive_desired_joined\n    |> map(fn: (r) =>
    ({\n        r with\n        _value: int(v: r._value_desired_replicas - r._value_active_replicas)\n        }))\n    |>
    keep(columns: [\"_time\", \"_value\", \"deployment\"])\n    |> aggregateWindow(every:
    v.windowPeriod, fn: mean)","resultFormat":"time_series","alias":"","measurement":"","rawQuery":true,"refId":"A"}],"timeFrom":null,"timeShift":null,"title":"Autoscaler
    Health","transparent":false,"transformations":[],"aliasColors":{},"bars":false,"fill":0,"grid":{"threshold1":null,"threshold1Color":"rgba(216,
    200, 27, 0.27)","threshold2":null,"threshold2Color":"rgba(234, 112, 112, 0.22)"},"isNew":true,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false,"alignAsTable":false,"hideEmpty":false,"hideZero":false,"rightSide":false,"sideWidth":null,"sort":null,"sortDesc":false},"lines":true,"linewidth":2,"nullPointMode":"connected","options":{"dataLinks":[],"alertThreshold":true},"percentage":false,"pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"stack":false,"steppedLine":false,"tooltip":{"msResolution":true,"shared":true,"sort":0,"value_type":"individual"},"thresholds":[],"type":"graph","xaxis":{"mode":"time","name":null,"values":[],"show":true},"yaxes":[{"decimals":null,"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true},{"decimals":null,"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":0}}],"refresh":false,"rows":[],"schemaVersion":12,"sharedCrosshair":false,"style":"dark","tags":[],"templating":{"list":[]},"title":"Autoscaling
    Dashboard","time":{"from":"now-1h","to":"now"},"timepicker":{"refresh_intervals":["5s","10s","30s","1m","5m","15m","30m","1h","2h","1d"],"time_options":["5m","15m","1h","6h","12h","24h","2d","7d","30d"],"hidden":false},"timezone":"utc","version":0,"uid":"6ae692"}'
{{- end }}
  cache_dashboard.json: '{"annotations":{"list":[{"builtIn":1,"datasource":"-- Grafana
    --","enable":true,"hide":true,"iconColor":"rgba(0, 211, 255, 1)","name":"Annotations
    & Alerts","type":"dashboard"}]},"editable":true,"gnetId":null,"graphTooltip":0,"iteration":1623524723879,"links":[],"panels":[{"collapsed":false,"datasource":null,"gridPos":{"h":1,"w":24,"x":0,"y":0},"id":33,"panels":[],"title":"Application
    Metrics","type":"row"},{"bars":false,"dashLength":10,"dashes":false,"datasource":null,"fill":1,"fillGradient":1,"gridPos":{"h":8,"w":12,"x":0,"y":1},"hiddenSeries":false,"id":24,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":2,"nullPointMode":"null
    as zero","options":{"alertThreshold":false},"percentage":false,"pluginVersion":"7.5.12","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"orderByTime":"ASC","policy":"default","query":"from(bucket:
    \"snorkel\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |>
    filter(fn: (r) => r[\"host\"] =~ /^${hostname:regex}$/)\n  |> filter(fn: (r) =>
    not exists r[\"instance_id\"] or r[\"instance_id\"] =~ /^${instance_id:regex}$/)\n  |>
    filter(fn: (r) => r[\"_measurement\"] == \"tdm_cache_hit\" or r[\"_measurement\"]
    == \"tdm_cache_miss\")\n  |> aggregateWindow(every: v.windowPeriod, fn: sum)\n  |>
    yield(name: \"sum\")","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"tags":[]}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Cache
    Hits and Misses","tooltip":{"shared":false,"sort":1,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":"Number
    of Cache hits","logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"collapsed":false,"datasource":null,"gridPos":{"h":1,"w":24,"x":0,"y":9},"id":35,"panels":[],"title":"Redis
    Stats","type":"row"},{"bars":false,"dashLength":10,"dashes":false,"datasource":null,"description":"","fill":1,"fillGradient":0,"gridPos":{"h":8,"w":12,"x":0,"y":10},"hiddenSeries":false,"id":38,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"nullPointMode":"null
    as zero","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.5.12","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"orderByTime":"ASC","policy":"default","query":"from(bucket:
    \"snorkel\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |>
    filter(fn: (r) => r[\"host\"] =~ /^${hostname:regex}$/)\n  |> filter(fn: (r) =>
    not exists r[\"instance_id\"] or r[\"instance_id\"] =~ /^${instance_id:regex}$/)\n  |>
    filter(fn: (r) => r[\"_measurement\"] == \"redis_keyspace\")\n  |> filter(fn:
    (r) => r[\"_field\"] == \"keys\")\n  |> aggregateWindow(every: v.windowPeriod,
    fn: max, createEmpty: false)\n  |> yield(name: \"max\")","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"tags":[]}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Number
    of Redis Keys","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":"Max
    number of Redis Keys","logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"bars":false,"dashLength":10,"dashes":false,"datasource":null,"fill":1,"fillGradient":0,"gridPos":{"h":8,"w":12,"x":12,"y":10},"hiddenSeries":false,"id":39,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.5.12","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"orderByTime":"ASC","policy":"default","query":"from(bucket:
    \"snorkel\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |>
    filter(fn: (r) => r[\"host\"] =~ /^${hostname:regex}$/)\n  |> filter(fn: (r) =>
    not exists r[\"instance_id\"] or r[\"instance_id\"] =~ /^${instance_id:regex}$/)\n  |>
    filter(fn: (r) => r[\"_measurement\"] == \"redis\")\n  |> filter(fn: (r) => r[\"_field\"]
    == \"clients\")\n  |> aggregateWindow(every: v.windowPeriod, fn: max, createEmpty:
    false)\n  |> yield(name: \"max\")","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"tags":[]}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Max
    Connections","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"bars":false,"dashLength":10,"dashes":false,"datasource":null,"fill":1,"fillGradient":0,"gridPos":{"h":8,"w":12,"x":0,"y":18},"hiddenSeries":false,"id":41,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.5.12","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"orderByTime":"ASC","policy":"default","query":"from(bucket:
    \"snorkel\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |>
    filter(fn: (r) => r[\"host\"] =~ /^${hostname:regex}$/)\n  |> filter(fn: (r) =>
    not exists r[\"instance_id\"] or r[\"instance_id\"] =~ /^${instance_id:regex}$/)\n  |>
    filter(fn: (r) => r[\"_measurement\"] == \"redis\")\n  |> filter(fn: (r) => r[\"_field\"]
    == \"used_memory_peak\" or r[\"_field\"] == \"used_memory\" or r[\"_field\"] ==
    \"used_memory_rss\")\n  |> aggregateWindow(every: v.windowPeriod, fn: max, createEmpty:
    false)\n  |> yield(name: \"max\")","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"tags":[]}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Memory
    Usage","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":"Memory  (MB)","logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}}],"refresh":false,"schemaVersion":26,"style":"dark","tags":[],"templating":{"list":[{"allValue":null,"current":{"selected":true,"text":["All"],"value":["$__all"]},"datasource":"influxdb","definition":"","hide":0,"includeAll":true,"label":null,"multi":true,"name":"hostname","options":[],"query":"import
    \"influxdata/influxdb/v1\"\nv1.tagValues(\n    bucket: v.bucket,\n    tag: \"host\",\n    predicate:
    (r) => true,\n    start: -1y\n)","refresh":1,"regex":"","skipUrlSync":false,"sort":1,"tagValuesQuery":"","tags":[],"tagsQuery":"","type":"query","useTags":false},{"allValue":null,"current":{"selected":true,"text":["All"],"value":["$__all"]},"datasource":"influxdb","definition":"","hide":0,"includeAll":true,"label":null,"multi":true,"name":"instance_id","options":[],"query":"import
    \"influxdata/influxdb/v1\"\nv1.tagValues(\n    bucket: v.bucket,\n    tag: \"instance_id\",\n    predicate:
    (r) => true,\n    start: -1y\n)","refresh":1,"regex":"","skipUrlSync":false,"sort":1,"tagValuesQuery":"","tags":[],"tagsQuery":"","type":"query","useTags":false},{"allValue":null,"current":{"selected":true,"tags":[],"text":["All"],"value":["$__all"]},"datasource":"influxdb","hide":0,"includeAll":true,"label":null,"multi":true,"name":"hostname","options":[],"query":"import
    \"influxdata/influxdb/v1\"\nv1.tagValues(\n    bucket: v.bucket,\n    tag: \"host\",\n    predicate:
    (r) => true,\n    start: -1y\n)","refresh":1,"regex":"","skipUrlSync":false,"sort":1,"tagValuesQuery":"","tags":[],"tagsQuery":"","type":"query","useTags":false},{"allValue":null,"current":{"selected":true,"tags":[],"text":["All"],"value":["$__all"]},"datasource":"influxdb","hide":0,"includeAll":true,"label":null,"multi":true,"name":"instance_id","options":[],"query":"import
    \"influxdata/influxdb/v1\"\nv1.tagValues(\n    bucket: v.bucket,\n    tag: \"instance_id\",\n    predicate:
    (r) => true,\n    start: -1y\n)","refresh":1,"regex":"","skipUrlSync":false,"sort":1,"tagValuesQuery":"","tags":[],"tagsQuery":"","type":"query","useTags":false}]},"time":{"from":"now-6h","to":"now"},"timezone":"browser","title":"Caching","uid":"bU1IJkgnz","version":12}'
  db_dashboard.json: '{"annotations":{"list":[{"builtIn":1,"datasource":"-- Grafana
    --","enable":true,"hide":true,"iconColor":"rgba(0, 211, 255, 1)","name":"Annotations
    & Alerts","type":"dashboard"}]},"editable":true,"gnetId":null,"graphTooltip":0,"iteration":1622040375971,"links":[],"panels":[{"collapsed":false,"datasource":null,"gridPos":{"h":1,"w":24,"x":0,"y":0},"id":33,"panels":[],"title":"Application
    Metrics","type":"row"},{"bars":false,"dashLength":10,"dashes":false,"datasource":null,"fill":1,"fillGradient":1,"gridPos":{"h":8,"w":12,"x":0,"y":1},"hiddenSeries":false,"id":24,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"nullPointMode":"null
    as zero","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.5.12","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"orderByTime":"ASC","policy":"default","query":"from(bucket:
    \"snorkel\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |>
    filter(fn: (r) => r[\"host\"] =~ /^${hostname:regex}$/)\n  |> filter(fn: (r) =>
    not exists r[\"instance_id\"] or r[\"instance_id\"] =~ /^${instance_id:regex}$/)\n  |>
    filter(fn: (r) => r[\"_measurement\"] == \"tdm_db_num_queries\")\n  |> filter(fn:
    (r) => r[\"_field\"] == \"value\")\n  |> aggregateWindow(every: v.windowPeriod,
    fn: max, createEmpty: false)\n  |> yield(name: \"max\")\n","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"tags":[]}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Number
    of DB Queries from TDM","tooltip":{"shared":false,"sort":1,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"$$hashKey":"object:195","format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true},{"$$hashKey":"object:196","format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"bars":false,"dashLength":10,"dashes":false,"datasource":null,"fill":1,"fillGradient":0,"gridPos":{"h":8,"w":12,"x":12,"y":1},"hiddenSeries":false,"id":26,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.5.12","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":true,"steppedLine":false,"targets":[{"groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"orderByTime":"ASC","policy":"default","query":"from(bucket:
    \"snorkel\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |>
    filter(fn: (r) => r[\"host\"] =~ /^${hostname:regex}$/)\n  |> filter(fn: (r) =>
    not exists r[\"instance_id\"] or r[\"instance_id\"] =~ /^${instance_id:regex}$/)\n  |>
    filter(fn: (r) => r[\"_measurement\"] == \"engine_db_num_queries\")\n  |> filter(fn:
    (r) => r[\"_field\"] == \"value\")\n  |> aggregateWindow(every: v.windowPeriod,
    fn: max, createEmpty: false)\n  |> yield(name: \"max\")\n","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"tags":[]}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Num
    db queries from engine","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"$$hashKey":"object:521","format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true},{"$$hashKey":"object:522","format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"bars":false,"dashLength":10,"dashes":false,"datasource":null,"fill":0,"fillGradient":0,"gridPos":{"h":8,"w":12,"x":0,"y":9},"hiddenSeries":false,"id":27,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.5.12","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"orderByTime":"ASC","policy":"default","query":"from(bucket:
    \"snorkel\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |>
    filter(fn: (r) => r[\"host\"] =~ /^${hostname:regex}$/)\n  |> filter(fn: (r) =>
    not exists r[\"instance_id\"] or r[\"instance_id\"] =~ /^${instance_id:regex}$/)\n  |>
    filter(fn: (r) => r[\"_measurement\"] == \"studio_db_num_queries\")\n  |> filter(fn:
    (r) => r[\"_field\"] == \"value\")\n  |> aggregateWindow(every: v.windowPeriod,
    fn: max, createEmpty: false)\n  |> yield(name: \"max\")\n","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"tags":[]}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Num
    db queries from studio","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"$$hashKey":"object:521","format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true},{"$$hashKey":"object:522","format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"bars":false,"dashLength":10,"dashes":false,"datasource":null,"fill":0,"fillGradient":0,"gridPos":{"h":8,"w":12,"x":12,"y":9},"hiddenSeries":false,"id":31,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"nullPointMode":"connected","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.5.12","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"orderByTime":"ASC","policy":"default","query":"from(bucket:
    \"snorkel\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |>
    filter(fn: (r) => r[\"host\"] =~ /^${hostname:regex}$/)\n  |> filter(fn: (r) =>
    not exists r[\"instance_id\"] or r[\"instance_id\"] =~ /^${instance_id:regex}$/)\n  |>
    filter(fn: (r) => r[\"_measurement\"] == \"studio_db_connection_pool_available\"
    or r[\"_measurement\"] == \"studio_db_connection_pool_total\" or r[\"_measurement\"]
    == \"studio_db_connection_pool_used\")\n  |> filter(fn: (r) => r[\"_field\"] ==
    \"value\")\n  |> aggregateWindow(every: v.windowPeriod, fn: max, createEmpty:
    false)\n  |> yield(name: \"max\")\n","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"tags":[]}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Studio
    connection pool Stats","tooltip":{"shared":false,"sort":1,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"$$hashKey":"object:521","format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true},{"$$hashKey":"object:522","format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"bars":false,"dashLength":10,"dashes":false,"datasource":null,"fill":0,"fillGradient":0,"gridPos":{"h":8,"w":12,"x":0,"y":17},"hiddenSeries":false,"id":29,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"nullPointMode":"connected","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.5.12","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"orderByTime":"ASC","policy":"default","query":"from(bucket:
    \"snorkel\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |>
    filter(fn: (r) => r[\"host\"] =~ /^${hostname:regex}$/)\n  |> filter(fn: (r) =>
    not exists r[\"instance_id\"] or r[\"instance_id\"] =~ /^${instance_id:regex}$/)\n  |>
    filter(fn: (r) => r[\"_measurement\"] == \"tdm_db_connection_pool_available\"
    or r[\"_measurement\"] == \"tdm_db_connection_pool_total\" or r[\"_measurement\"]
    == \"tdm_db_connection_pool_used\")\n  |> filter(fn: (r) => r[\"_field\"] == \"value\")\n  |>
    aggregateWindow(every: v.windowPeriod, fn: max, createEmpty: false)\n  |> yield(name:
    \"max\")\n","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"tags":[]}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"TDM
    connection pool Stats","tooltip":{"shared":false,"sort":1,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"$$hashKey":"object:521","format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true},{"$$hashKey":"object:522","format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"collapsed":false,"datasource":null,"gridPos":{"h":1,"w":24,"x":0,"y":25},"id":35,"panels":[],"title":"DB
    stats ","type":"row"},{"bars":false,"dashLength":10,"dashes":false,"datasource":null,"description":"","fill":0,"fillGradient":0,"gridPos":{"h":8,"w":12,"x":0,"y":26},"hiddenSeries":false,"id":8,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.5.12","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"orderByTime":"ASC","policy":"default","query":"from(bucket:
    \"snorkel\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |>
    filter(fn: (r) => r[\"host\"] =~ /^${hostname:regex}$/)\n  |> filter(fn: (r) =>
    not exists r[\"instance_id\"] or r[\"instance_id\"] =~ /^${instance_id:regex}$/)\n  |>
    filter(fn: (r) => r[\"_measurement\"] == \"postgresql\")\n  |> filter(fn: (r)
    => r[\"_field\"] == \"numbackends\")\n  |> aggregateWindow(every: v.windowPeriod,
    fn: max, createEmpty: false)\n  |> yield(name: \"max\")\n\n","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"tags":[]}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Number
    of Active Backend Connections","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"$$hashKey":"object:468","format":"short","label":"#
    Active Backend connections","logBase":1,"max":null,"min":null,"show":true},{"$$hashKey":"object:469","format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"bars":false,"dashLength":10,"dashes":false,"datasource":null,"fill":1,"fillGradient":0,"gridPos":{"h":8,"w":12,"x":12,"y":26},"hiddenSeries":false,"id":12,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.5.12","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"orderByTime":"ASC","policy":"default","query":"from(bucket:
    \"snorkel\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |>
    filter(fn: (r) => r[\"host\"] =~ /^${hostname:regex}$/)\n  |> filter(fn: (r) =>
    not exists r[\"instance_id\"] or r[\"instance_id\"] =~ /^${instance_id:regex}$/)\n  |>
    filter(fn: (r) => r[\"_measurement\"] == \"postgresql\")\n  |> filter(fn: (r)
    => r[\"_field\"] == \"deadlocks\")\n  |> aggregateWindow(every: v.windowPeriod,
    fn: mean, createEmpty: false)\n  |> yield(name: \"mean\")\n\n","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"tags":[]}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Dead
    locks","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"$$hashKey":"object:874","format":"short","label":"#
    Dead Locks","logBase":1,"max":null,"min":null,"show":true},{"$$hashKey":"object:875","format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"bars":false,"dashLength":10,"dashes":false,"datasource":null,"fill":1,"fillGradient":0,"gridPos":{"h":8,"w":12,"x":0,"y":34},"hiddenSeries":false,"id":6,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.5.12","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"orderByTime":"ASC","policy":"default","query":"from(bucket:
    \"snorkel\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |>
    filter(fn: (r) => r[\"host\"] =~ /^${hostname:regex}$/)\n  |> filter(fn: (r) =>
    not exists r[\"instance_id\"] or r[\"instance_id\"] =~ /^${instance_id:regex}$/)\n  |>
    filter(fn: (r) => r[\"_measurement\"] == \"postgresql\")\n  |> filter(fn: (r)
    => r[\"_field\"] == \"tup_returned\")\n  |> aggregateWindow(every: v.windowPeriod,
    fn: mean, createEmpty: false)\n  |> yield(name: \"mean\")\n\n","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"tags":[]}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Number
    of Rows returned","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"$$hashKey":"object:378","format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true},{"$$hashKey":"object:379","format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"bars":false,"dashLength":10,"dashes":false,"datasource":null,"fill":0,"fillGradient":0,"gridPos":{"h":8,"w":12,"x":12,"y":34},"hiddenSeries":false,"id":16,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.5.12","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"orderByTime":"ASC","policy":"default","query":"from(bucket:
    \"snorkel\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |>
    filter(fn: (r) => r[\"host\"] =~ /^${hostname:regex}$/)\n  |> filter(fn: (r) =>
    not exists r[\"instance_id\"] or r[\"instance_id\"] =~ /^${instance_id:regex}$/)\n  |>
    filter(fn: (r) => r[\"_measurement\"] == \"postgresql\")\n  |> filter(fn: (r)
    => r[\"_field\"] == \"tup_inserted\")\n  |> aggregateWindow(every: v.windowPeriod,
    fn: max, createEmpty: false)\n  |> yield(name: \"max\")\n\n","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"tags":[]}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Rows
    Inserted","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"$$hashKey":"object:1044","format":"short","label":"#
    Rows Inserted","logBase":1,"max":null,"min":null,"show":true},{"$$hashKey":"object:1045","format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"bars":false,"dashLength":10,"dashes":false,"datasource":null,"fill":1,"fillGradient":0,"gridPos":{"h":8,"w":12,"x":0,"y":42},"hiddenSeries":false,"id":4,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.5.12","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"orderByTime":"ASC","policy":"default","query":"from(bucket:
    \"snorkel\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |>
    filter(fn: (r) => r[\"host\"] =~ /^${hostname:regex}$/)\n  |> filter(fn: (r) =>
    not exists r[\"instance_id\"] or r[\"instance_id\"] =~ /^${instance_id:regex}$/)\n  |>
    filter(fn: (r) => r[\"_measurement\"] == \"postgresql\")\n  |> filter(fn: (r)
    => r[\"_field\"] == \"tup_fetched\")\n  |> aggregateWindow(every: v.windowPeriod,
    fn: mean, createEmpty: false)\n  |> yield(name: \"mean\")\n\n","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"tags":[]}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Rows
    Fetched","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"$$hashKey":"object:279","format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true},{"$$hashKey":"object:280","format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{"xact_rollback
    {host=\"edge.k8s.g498.io\", instance_id=\"60f4e099-46e4-4e34-84dd-52795f31a514\"}":"red"},"bars":false,"dashLength":10,"dashes":false,"datasource":null,"fill":1,"fillGradient":0,"gridPos":{"h":8,"w":12,"x":12,"y":42},"hiddenSeries":false,"id":20,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.5.12","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"orderByTime":"ASC","policy":"default","query":"from(bucket:
    \"snorkel\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |>
    filter(fn: (r) => r[\"host\"] =~ /^${hostname:regex}$/)\n  |> filter(fn: (r) =>
    not exists r[\"instance_id\"] or r[\"instance_id\"] =~ /^${instance_id:regex}$/)\n  |>
    filter(fn: (r) => r[\"_measurement\"] == \"postgresql\")\n  |> filter(fn: (r)
    => r[\"_field\"] == \"xact_rollback\")\n  |> aggregateWindow(every: v.windowPeriod,
    fn: max, createEmpty: false)\n  |> yield(name: \"max\")\n","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"tags":[]}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Transactions
    Rolledback","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"$$hashKey":"object:1214","format":"short","label":"#
    Transactions Rollback","logBase":1,"max":null,"min":null,"show":true},{"$$hashKey":"object:1215","format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"bars":false,"dashLength":10,"dashes":false,"datasource":null,"fill":1,"fillGradient":0,"gridPos":{"h":8,"w":12,"x":0,"y":50},"hiddenSeries":false,"id":10,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.5.12","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":true,"steppedLine":false,"targets":[{"groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"orderByTime":"ASC","policy":"default","query":"from(bucket:
    \"snorkel\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |>
    filter(fn: (r) => r[\"host\"] =~ /^${hostname:regex}$/)\n  |> filter(fn: (r) =>
    not exists r[\"instance_id\"] or r[\"instance_id\"] =~ /^${instance_id:regex}$/)\n  |>
    filter(fn: (r) => r[\"_measurement\"] == \"postgresql\")\n  |> filter(fn: (r)
    => r[\"_field\"] == \"blks_read\" or r[\"_field\"] == \"blks_hit\")\n  |> aggregateWindow(every:
    v.windowPeriod, fn: mean, createEmpty: false)\n  |> yield(name: \"mean\")\n\n","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"tags":[]}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Disk
    Blks Read","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"$$hashKey":"object:789","format":"short","label":"#
    Blks Read","logBase":1,"max":null,"min":null,"show":true},{"$$hashKey":"object:790","format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"bars":false,"dashLength":10,"dashes":false,"datasource":null,"fill":1,"fillGradient":0,"gridPos":{"h":8,"w":12,"x":12,"y":50},"hiddenSeries":false,"id":22,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.5.12","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"orderByTime":"ASC","policy":"default","query":"from(bucket:
    \"snorkel\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |>
    filter(fn: (r) => r[\"host\"] =~ /^${hostname:regex}$/)\n  |> filter(fn: (r) =>
    not exists r[\"instance_id\"] or r[\"instance_id\"] =~ /^${instance_id:regex}$/)\n  |>
    filter(fn: (r) => r[\"_measurement\"] == \"postgresql\")\n  |> filter(fn: (r)
    => r[\"_field\"] == \"xact_commit\")\n  |> aggregateWindow(every: v.windowPeriod,
    fn: max, createEmpty: false)\n  |> yield(name: \"max\")","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"tags":[]}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Transactions
    Commited","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"$$hashKey":"object:1299","format":"short","label":"#
    Transactions committed","logBase":1,"max":null,"min":null,"show":true},{"$$hashKey":"object:1300","format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"bars":false,"dashLength":10,"dashes":false,"datasource":null,"fill":1,"fillGradient":0,"gridPos":{"h":8,"w":12,"x":0,"y":58},"hiddenSeries":false,"id":18,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.5.12","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"orderByTime":"ASC","policy":"default","query":"from(bucket:
    \"snorkel\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |>
    filter(fn: (r) => r[\"host\"] =~ /^${hostname:regex}$/)\n  |> filter(fn: (r) =>
    not exists r[\"instance_id\"] or r[\"instance_id\"] =~ /^${instance_id:regex}$/)\n  |>
    filter(fn: (r) => r[\"_measurement\"] == \"postgresql\")\n  |> filter(fn: (r)
    => r[\"_field\"] == \"tup_deleted\")\n  |> aggregateWindow(every: v.windowPeriod,
    fn: max, createEmpty: false)\n  |> yield(name: \"max\")","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"tags":[]}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Rows
    deleted","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"$$hashKey":"object:1129","format":"short","label":"#
    Rows Deleted","logBase":1,"max":null,"min":null,"show":true},{"$$hashKey":"object:1130","format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"bars":false,"dashLength":10,"dashes":false,"datasource":null,"fill":1,"fillGradient":0,"gridPos":{"h":8,"w":12,"x":12,"y":58},"hiddenSeries":false,"id":14,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.5.12","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"orderByTime":"ASC","policy":"default","query":"from(bucket:
    \"snorkel\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |>
    filter(fn: (r) => r[\"host\"] =~ /^${hostname:regex}$/)\n  |> filter(fn: (r) =>
    not exists r[\"instance_id\"] or r[\"instance_id\"] =~ /^${instance_id:regex}$/)\n  |>
    filter(fn: (r) => r[\"_measurement\"] == \"postgresql\")\n  |> filter(fn: (r)
    => r[\"_field\"] == \"temp_bytes\")\n  |> aggregateWindow(every: v.windowPeriod,
    fn: max, createEmpty: false)\n  |> yield(name: \"max\")\n","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"tags":[]}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Number
    of Bytes written to temp file","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"$$hashKey":"object:959","format":"short","label":"#
    temp file bytes","logBase":1,"max":null,"min":null,"show":true},{"$$hashKey":"object:960","format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}}],"refresh":false,"schemaVersion":26,"style":"dark","tags":[],"templating":{"list":[{"allValue":null,"current":{"selected":true,"text":["All"],"value":["$__all"]},"datasource":"influxdb","definition":"","hide":0,"includeAll":true,"label":null,"multi":true,"name":"hostname","options":[],"query":"import
    \"influxdata/influxdb/v1\"\nv1.tagValues(\n    bucket: v.bucket,\n    tag: \"host\",\n    predicate:
    (r) => true,\n    start: -1y\n)","refresh":1,"regex":"","skipUrlSync":false,"sort":1,"tagValuesQuery":"","tags":[],"tagsQuery":"","type":"query","useTags":false},{"allValue":null,"current":{"selected":true,"text":["All"],"value":["$__all"]},"datasource":"influxdb","definition":"","hide":0,"includeAll":true,"label":null,"multi":true,"name":"instance_id","options":[],"query":"import
    \"influxdata/influxdb/v1\"\nv1.tagValues(\n    bucket: v.bucket,\n    tag: \"instance_id\",\n    predicate:
    (r) => true,\n    start: -1y\n)","refresh":1,"regex":"","skipUrlSync":false,"sort":1,"tagValuesQuery":"","tags":[],"tagsQuery":"","type":"query","useTags":false},{"allValue":null,"current":{"selected":true,"tags":[],"text":["All"],"value":["$__all"]},"datasource":"influxdb","hide":0,"includeAll":true,"label":null,"multi":true,"name":"hostname","options":[],"query":"import
    \"influxdata/influxdb/v1\"\nv1.tagValues(\n    bucket: v.bucket,\n    tag: \"host\",\n    predicate:
    (r) => true,\n    start: -1y\n)","refresh":1,"regex":"","skipUrlSync":false,"sort":1,"tagValuesQuery":"","tags":[],"tagsQuery":"","type":"query","useTags":false},{"allValue":null,"current":{"selected":true,"tags":[],"text":["All"],"value":["$__all"]},"datasource":"influxdb","hide":0,"includeAll":true,"label":null,"multi":true,"name":"instance_id","options":[],"query":"import
    \"influxdata/influxdb/v1\"\nv1.tagValues(\n    bucket: v.bucket,\n    tag: \"instance_id\",\n    predicate:
    (r) => true,\n    start: -1y\n)","refresh":1,"regex":"","skipUrlSync":false,"sort":1,"tagValuesQuery":"","tags":[],"tagsQuery":"","type":"query","useTags":false}]},"time":{"from":"now-6h","to":"now"},"timezone":"browser","title":"DB","uid":"sTv1XmwMz","version":1}'
  engine_latency_dashboard.json: '{"__inputs":[],"annotations":{"list":[]},"description":"","editable":true,"gnetId":null,  
    \"snorkel\")\n    |> range(start: v.timeRangeStart, stop:v.timeRangeStop)\n    |>
    filter(fn: (r) => r[\"event_type\"] =~ /^(get_clarity_matrix.*)|(ingest_predictions.*)|(load_data_from_config.*)|(train_predict.*)$/)\n    |>
    filter(fn: (r) => r._measurement == \"engine_task_latency\")\n    |> filter(fn:
    (r) => r._field == \"90_percentile\")","resultFormat":"time_series","alias":"","measurement":"","rawQuery":true,"refId":"A"}],"timeFrom":null,"timeShift":null,"title":"Train
    model job steps 90th percentile","transparent":false,"transformations":[],"aliasColors":{},"bars":false,"fill":0,"grid":{"threshold1":null,"threshold1Color":"rgba(216,
    200, 27, 0.27)","threshold2":null,"threshold2Color":"rgba(234, 112, 112, 0.22)"},"isNew":true,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false,"alignAsTable":false,"hideEmpty":false,"hideZero":false,"rightSide":false,"sideWidth":null,"sort":null,"sortDesc":false},"lines":true,"linewidth":2,"nullPointMode":"connected","options":{"dataLinks":[],"alertThreshold":true},"percentage":false,"pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"stack":false,"steppedLine":false,"tooltip":{"msResolution":true,"shared":true,"sort":0,"value_type":"individual"},"thresholds":[],"type":"graph","xaxis":{"mode":"time","name":null,"values":[],"show":true},"yaxes":[{"decimals":null,"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true},{"decimals":null,"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":0}},{"cacheTimeout":null,"datasource":null,"description":null,"editable":true,"error":false,"fieldConfig":{"defaults":{"thresholds":{"mode":"absolute","steps":[]}}},"height":null,"gridPos":{"h":8,"w":12,"x":12,"y":0},"hideTimeOverride":false,"id":2,"interval":null,"links":[],"maxDataPoints":null,"minSpan":null,"repeat":null,"repeatDirection":null,"maxPerRow":null,"span":null,"targets":[{"query":"from(bucket:
    \"snorkel\")\n    |> range(start: v.timeRangeStart, stop:v.timeRangeStop)\n    |>
    filter(fn: (r) => r[\"event_type\"] =~ /^transfer_assets.*$/)\n    |> filter(fn:
    (r) => r._measurement == \"engine_task_latency\")\n    |> filter(fn: (r) => r._field
    == \"90_percentile\")","resultFormat":"time_series","alias":"","measurement":"","rawQuery":true,"refId":"A"}],"timeFrom":null,"timeShift":null,"title":"Transfer
    assets 90th percentile","transparent":false,"transformations":[],"aliasColors":{},"bars":false,"fill":0,"grid":{"threshold1":null,"threshold1Color":"rgba(216,
    200, 27, 0.27)","threshold2":null,"threshold2Color":"rgba(234, 112, 112, 0.22)"},"isNew":true,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false,"alignAsTable":false,"hideEmpty":false,"hideZero":false,"rightSide":false,"sideWidth":null,"sort":null,"sortDesc":false},"lines":true,"linewidth":2,"nullPointMode":"connected","options":{"dataLinks":[],"alertThreshold":true},"percentage":false,"pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"stack":false,"steppedLine":false,"tooltip":{"msResolution":true,"shared":true,"sort":0,"value_type":"individual"},"thresholds":[],"type":"graph","xaxis":{"mode":"time","name":null,"values":[],"show":true},"yaxes":[{"decimals":null,"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true},{"decimals":null,"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":0}},{"cacheTimeout":null,"datasource":null,"description":null,"editable":true,"error":false,"fieldConfig":{"defaults":{"thresholds":{"mode":"absolute","steps":[]}}},"height":null,"gridPos":{"h":8,"w":12,"x":0,"y":8},"hideTimeOverride":false,"id":3,"interval":null,"links":[],"maxDataPoints":null,"minSpan":null,"repeat":null,"repeatDirection":null,"maxPerRow":null,"span":null,"targets":[{"query":"from(bucket:
    \"snorkel\")\n    |> range(start: v.timeRangeStart, stop:v.timeRangeStop)\n    |>
    filter(fn: (r) => r._measurement == \"engine_task_latency\")\n    |> filter(fn:
    (r) => r._field == \"90_percentile\")","resultFormat":"time_series","alias":"","measurement":"","rawQuery":true,"refId":"A"}],"timeFrom":null,"timeShift":null,"title":"Job
    component latency 90th percentile","transparent":false,"transformations":[],"aliasColors":{},"bars":false,"fill":0,"grid":{"threshold1":null,"threshold1Color":"rgba(216,
    200, 27, 0.27)","threshold2":null,"threshold2Color":"rgba(234, 112, 112, 0.22)"},"isNew":true,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false,"alignAsTable":false,"hideEmpty":false,"hideZero":false,"rightSide":false,"sideWidth":null,"sort":null,"sortDesc":false},"lines":true,"linewidth":2,"nullPointMode":"connected","options":{"dataLinks":[],"alertThreshold":true},"percentage":false,"pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"stack":false,"steppedLine":false,"tooltip":{"msResolution":true,"shared":true,"sort":0,"value_type":"individual"},"thresholds":[],"type":"graph","xaxis":{"mode":"time","name":null,"values":[],"show":true},"yaxes":[{"decimals":null,"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true},{"decimals":null,"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":0}},{"cacheTimeout":null,"datasource":null,"description":null,"editable":true,"error":false,"fieldConfig":{"defaults":{"thresholds":{"mode":"absolute","steps":[]}}},"height":null,"gridPos":{"h":8,"w":12,"x":12,"y":8},"hideTimeOverride":false,"id":4,"interval":null,"links":[],"maxDataPoints":null,"minSpan":null,"repeat":null,"repeatDirection":null,"maxPerRow":null,"span":null,"targets":[{"query":"from(bucket:
    \"snorkel\")\n    |> range(start: v.timeRangeStart, stop:v.timeRangeStop)\n    |>
    filter(fn: (r) => r._measurement == \"engine_task_latency\")\n    |> filter(fn:
    (r) => r._field == \"99_percentile\")","resultFormat":"time_series","alias":"","measurement":"","rawQuery":true,"refId":"A"}],"timeFrom":null,"timeShift":null,"title":"Engine
    components latency 99th percentile","transparent":false,"transformations":[],"aliasColors":{},"bars":false,"fill":0,"grid":{"threshold1":null,"threshold1Color":"rgba(216,
    200, 27, 0.27)","threshold2":null,"threshold2Color":"rgba(234, 112, 112, 0.22)"},"isNew":true,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false,"alignAsTable":false,"hideEmpty":false,"hideZero":false,"rightSide":false,"sideWidth":null,"sort":null,"sortDesc":false},"lines":true,"linewidth":2,"nullPointMode":"connected","options":{"dataLinks":[],"alertThreshold":true},"percentage":false,"pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"stack":false,"steppedLine":false,"tooltip":{"msResolution":true,"shared":true,"sort":0,"value_type":"individual"},"thresholds":[],"type":"graph","xaxis":{"mode":"time","name":null,"values":[],"show":true},"yaxes":[{"decimals":null,"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true},{"decimals":null,"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":0}},{"cacheTimeout":null,"datasource":null,"description":null,"editable":true,"error":false,"fieldConfig":{"defaults":{"thresholds":{"mode":"absolute","steps":[]}}},"height":null,"gridPos":{"h":8,"w":12,"x":0,"y":16},"hideTimeOverride":false,"id":5,"interval":null,"links":[],"maxDataPoints":null,"minSpan":null,"repeat":null,"repeatDirection":null,"maxPerRow":null,"span":null,"targets":[{"query":"from(bucket:
    \"snorkel\")\n    |> range(start: v.timeRangeStart, stop:v.timeRangeStop)\n    |>
    filter(fn: (r) => r._measurement == \"engine_task_latency\")\n    |> filter(fn:
    (r) => r._field == \"100_percentile\")","resultFormat":"time_series","alias":"","measurement":"","rawQuery":true,"refId":"A"}],"timeFrom":null,"timeShift":null,"title":"Engine
    components latency 100th percentile","transparent":false,"transformations":[],"aliasColors":{},"bars":false,"fill":0,"grid":{"threshold1":null,"threshold1Color":"rgba(216,
    200, 27, 0.27)","threshold2":null,"threshold2Color":"rgba(234, 112, 112, 0.22)"},"isNew":true,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false,"alignAsTable":false,"hideEmpty":false,"hideZero":false,"rightSide":false,"sideWidth":null,"sort":null,"sortDesc":false},"lines":true,"linewidth":2,"nullPointMode":"connected","options":{"dataLinks":[],"alertThreshold":true},"percentage":false,"pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"stack":false,"steppedLine":false,"tooltip":{"msResolution":true,"shared":true,"sort":0,"value_type":"individual"},"thresholds":[],"type":"graph","xaxis":{"mode":"time","name":null,"values":[],"show":true},"yaxes":[{"decimals":null,"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true},{"decimals":null,"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":0}}],"refresh":false,"rows":[],"schemaVersion":12,"sharedCrosshair":false,"style":"dark","tags":[],"templating":{"list":[]},"title":"Engine
    Latency","time":{"from":"now-1h","to":"now"},"timepicker":{"refresh_intervals":["5s","10s","30s","1m","5m","15m","30m","1h","2h","1d"],"time_options":["5m","15m","1h","6h","12h","24h","2d","7d","30d"],"hidden":false},"timezone":"utc","version":0,"uid":"595479"}'
  inference_api_dashboard.json: '{"annotations":{"list":[{"builtIn":1,"datasource":"--
    Grafana --","enable":true,"hide":true,"iconColor":"rgba(0, 211, 255, 1)","name":"Annotations
    & Alerts","target":{"limit":100,"matchAny":false,"tags":[],"type":"dashboard"},"type":"dashboard"}]},"editable":true,"fiscalYearStartMonth":0,"gnetId":null,"graphTooltip":0,"iteration":1658425810892,"links":[],"liveNow":false,"panels":[{"bars":true,"dashLength":10,"dashes":false,"datasource":null,"description":"Usage
    of the /workflows/NNN/execute-{batch|online} endpoints","fill":1,"fillGradient":0,"gridPos":{"h":9,"w":12,"x":0,"y":0},"hiddenSeries":false,"id":2,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":false,"linewidth":1,"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"8.2.6","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"orderByTime":"ASC","policy":"default","query":"from(bucket:
    \"snorkel\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |>
    filter(fn: (r) => r[\"host\"] =~ /^${hostname:regex}$/)\n  |> filter(fn: (r) =>
    not exists r[\"instance_id\"] or r[\"instance_id\"] =~ /^${instance_id:regex}$/)\n  |>
    filter(fn: (r) => r[\"path\"] =~ /^\\/workflows\\/.*\\/execute-.*/)\n  |> filter(fn:
    (r) => r[\"_measurement\"] == \"api_requests_all\")\n  |> aggregateWindow(every:
    1h, fn: sum)\n  |> map(fn: (r) => ({\n    _time: r._time,\n    _value: r._value,\n    _field:
    r.api_name + \": \" + r.method + \" \" + r.path + \" \" + r.status_code,\n  }))","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"tags":[]}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Workflow
    Inference Endpoint Usage","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"datasource":null,"description":"Usage
    of the /workflows/NNN/execute-{batch|online} endpoints","fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"custom":{"align":"auto","displayMode":"auto"},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":80}]}},"overrides":[]},"gridPos":{"h":9,"w":12,"x":12,"y":0},"id":3,"options":{"showHeader":true},"pluginVersion":"8.2.6","targets":[{"groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"orderByTime":"ASC","policy":"default","query":"from(bucket:
    \"snorkel\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |>
    filter(fn: (r) => r[\"host\"] =~ /^${hostname:regex}$/)\n  |> filter(fn: (r) =>
    not exists r[\"instance_id\"] or r[\"instance_id\"] =~ /^${instance_id:regex}$/)\n  |>
    filter(fn: (r) => r[\"path\"] =~ /^\\/workflows\\/.*\\/execute-.*/)\n  |> filter(fn:
    (r) => r[\"_measurement\"] == \"api_requests_all\")\n  |> aggregateWindow(every:
    1h, fn: sum)\n  |> map(fn: (r) => ({\n    _time: r._time,\n    _value: r._value,\n    _field:
    r.api_name + \": \" + r.method + \" \" + r.path + \" \" + r.status_code,\n  }))","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"tags":[]}],"timeFrom":null,"timeShift":null,"title":"Workflow
    Inference Endpoint Usage","transformations":[{"id":"reduce","options":{"reducers":["sum"]}}],"type":"table"}],"schemaVersion":32,"style":"dark","tags":[],"templating":{"list":[{"allValue":null,"current":{"selected":true,"text":["All"],"value":["$__all"]},"datasource":"influxdb","definition":"","description":null,"error":null,"hide":0,"includeAll":true,"label":null,"multi":true,"name":"hostname","options":[],"query":"import
    \"influxdata/influxdb/v1\"\nv1.tagValues(\n    bucket: v.bucket,\n    tag: \"host\",\n    predicate:
    (r) => true,\n    start: -1y\n)","refresh":1,"regex":"","skipUrlSync":false,"sort":1,"tagValuesQuery":"","tagsQuery":"","type":"query","useTags":false},{"allValue":null,"current":{"selected":true,"text":["All"],"value":["$__all"]},"datasource":"influxdb","definition":"","description":null,"error":null,"hide":0,"includeAll":true,"label":null,"multi":true,"name":"instance_id","options":[],"query":"import
    \"influxdata/influxdb/v1\"\nv1.tagValues(\n    bucket: v.bucket,\n    tag: \"instance_id\",\n    predicate:
    (r) => true,\n    start: -1y\n)","refresh":1,"regex":"","skipUrlSync":false,"sort":1,"tagValuesQuery":"","tagsQuery":"","type":"query","useTags":false},{"allValue":null,"current":{"selected":true,"tags":[],"text":["All"],"value":["$__all"]},"datasource":"influxdb","hide":0,"includeAll":true,"label":null,"multi":true,"name":"hostname","options":[],"query":"import
    \"influxdata/influxdb/v1\"\nv1.tagValues(\n    bucket: v.bucket,\n    tag: \"host\",\n    predicate:
    (r) => true,\n    start: -1y\n)","refresh":1,"regex":"","skipUrlSync":false,"sort":1,"tagValuesQuery":"","tags":[],"tagsQuery":"","type":"query","useTags":false},{"allValue":null,"current":{"selected":true,"tags":[],"text":["All"],"value":["$__all"]},"datasource":"influxdb","hide":0,"includeAll":true,"label":null,"multi":true,"name":"instance_id","options":[],"query":"import
    \"influxdata/influxdb/v1\"\nv1.tagValues(\n    bucket: v.bucket,\n    tag: \"instance_id\",\n    predicate:
    (r) => true,\n    start: -1y\n)","refresh":1,"regex":"","skipUrlSync":false,"sort":1,"tagValuesQuery":"","tags":[],"tagsQuery":"","type":"query","useTags":false}]},"time":{"from":"now-7d","to":"now"},"timezone":"","title":"Inference
    API Usage","uid":"vMO7Yvu7k","version":1}'
  lfs_dashboard.json: '{"annotations":{"list":[{"builtIn":1,"datasource":"-- Grafana
    --","enable":true,"hide":true,"iconColor":"rgba(0, 211, 255, 1)","name":"Annotations
    & Alerts","type":"dashboard"}]},"editable":true,"gnetId":null,"graphTooltip":0,"id":4,"links":[],"panels":[{"bars":false,"dashLength":10,"dashes":false,"datasource":null,"description":"","fill":1,"fillGradient":0,"gridPos":{"h":8,"w":12,"x":0,"y":0},"hiddenSeries":false,"id":2,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.5.12","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"orderByTime":"ASC","policy":"default","query":"from(bucket:
    \"snorkel\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |>
    filter(fn: (r) => r[\"host\"] =~ /^${hostname:regex}$/)\n  |> filter(fn: (r) =>
    not exists r[\"instance_id\"] or r[\"instance_id\"] =~ /^${instance_id:regex}$/)\n  |>
    filter(fn: (r) => r[\"_measurement\"] == \"api_requests_latency\" and r[\"api_name\"]
    == \"Studio\" and r[\"method\"] == \"POST\" and r[\"path\"] == \"/tasks/NNN/lfs\"
    and r[\"status_code\"] == 201)\n  |> filter(fn: (r) => r[\"_field\"] == \"99.9_percentile\")\n  |>
    map(fn: (r) => ({\n    _field: \"P99.9\",\n    _time: r._time,\n    _value: r._value\n  }))","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"tags":[]},{"groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"orderByTime":"ASC","policy":"default","query":"from(bucket:
    \"snorkel\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |>
    filter(fn: (r) => r[\"host\"] =~ /^${hostname:regex}$/)\n  |> filter(fn: (r) =>
    not exists r[\"instance_id\"] or r[\"instance_id\"] =~ /^${instance_id:regex}$/)\n  |>
    filter(fn: (r) => r[\"_measurement\"] == \"api_requests_latency\" and r[\"api_name\"]
    == \"Studio\" and r[\"method\"] == \"POST\" and r[\"path\"] == \"/tasks/NNN/lfs\"
    and r[\"status_code\"] == 201)\n  |> filter(fn: (r) => r[\"_field\"] == \"99_percentile\")\n  |>
    map(fn: (r) => ({\n    _field: \"P99\",\n    _time: r._time,\n    _value: r._value\n  }))","refId":"B","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"tags":[]},{"groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"orderByTime":"ASC","policy":"default","query":"from(bucket:
    \"snorkel\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |>
    filter(fn: (r) => r[\"host\"] =~ /^${hostname:regex}$/)\n  |> filter(fn: (r) =>
    not exists r[\"instance_id\"] or r[\"instance_id\"] =~ /^${instance_id:regex}$/)\n  |>
    filter(fn: (r) => r[\"_measurement\"] == \"api_requests_latency\" and r[\"api_name\"]
    == \"Studio\" and r[\"method\"] == \"POST\" and r[\"path\"] == \"/tasks/NNN/lfs\"
    and r[\"status_code\"] == 201)\n  |> filter(fn: (r) => r[\"_field\"] == \"90_percentile\")\n  |>
    map(fn: (r) => ({\n    _field: \"P90\",\n    _time: r._time,\n    _value: r._value\n  }))","refId":"C","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"tags":[]},{"groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"orderByTime":"ASC","policy":"default","query":"from(bucket:
    \"snorkel\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |>
    filter(fn: (r) => r[\"host\"] =~ /^${hostname:regex}$/)\n  |> filter(fn: (r) =>
    not exists r[\"instance_id\"] or r[\"instance_id\"] =~ /^${instance_id:regex}$/)\n  |>
    filter(fn: (r) => r[\"_measurement\"] == \"api_requests_latency\" and r[\"api_name\"]
    == \"Studio\" and r[\"method\"] == \"POST\" and r[\"path\"] == \"/tasks/NNN/lfs\"
    and r[\"status_code\"] == 201)\n  |> filter(fn: (r) => r[\"_field\"] == \"50_percentile\")\n  |>
    map(fn: (r) => ({\n    _field: \"P50\",\n    _time: r._time,\n    _value: r._value\n  }))","refId":"D","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"tags":[]}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"LF
    Creation Time","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"ms","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}}],"schemaVersion":26,"style":"dark","tags":[],"templating":{"list":[{"allValue":null,"current":{"selected":true,"tags":[],"text":["All"],"value":["$__all"]},"datasource":"influxdb","hide":0,"includeAll":true,"label":null,"multi":true,"name":"hostname","options":[],"query":"import
    \"influxdata/influxdb/v1\"\nv1.tagValues(\n    bucket: v.bucket,\n    tag: \"host\",\n    predicate:
    (r) => true,\n    start: -1y\n)","refresh":1,"regex":"","skipUrlSync":false,"sort":1,"tagValuesQuery":"","tags":[],"tagsQuery":"","type":"query","useTags":false},{"allValue":null,"current":{"selected":true,"tags":[],"text":["All"],"value":["$__all"]},"datasource":"influxdb","hide":0,"includeAll":true,"label":null,"multi":true,"name":"instance_id","options":[],"query":"import
    \"influxdata/influxdb/v1\"\nv1.tagValues(\n    bucket: v.bucket,\n    tag: \"instance_id\",\n    predicate:
    (r) => true,\n    start: -1y\n)","refresh":1,"regex":"","skipUrlSync":false,"sort":1,"tagValuesQuery":"","tags":[],"tagsQuery":"","type":"query","useTags":false}]},"time":{"from":"now-1h","to":"now"},"timezone":"","title":"LFs","uid":"zbkOAA0Mz","version":1}'
  ray_dashboard.json: '{"annotations":{"list":[{"builtIn":1,"datasource":"-- Grafana
    --","enable":true,"hide":true,"iconColor":"rgba(0, 211, 255, 1)","name":"Annotations
    & Alerts","target":{"limit":100,"matchAny":false,"tags":[],"type":"dashboard"},"type":"dashboard"}]},"editable":true,"fiscalYearStartMonth":0,"gnetId":null,"graphTooltip":0,"id":12,"links":[],"liveNow":false,"panels":[{"datasource":null,"description":"Shows
    current ray tasks in different states","fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisLabel":"","axisPlacement":"auto","barAlignment":0,"drawStyle":"line","fillOpacity":0,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"lineInterpolation":"linear","lineWidth":1,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"auto","spanNulls":false,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":80}]}},"overrides":[]},"gridPos":{"h":8,"w":12,"x":0,"y":0},"id":2,"options":{"legend":{"calcs":[],"displayMode":"list","placement":"bottom"},"tooltip":{"mode":"single"}},"targets":[{"query":"from(bucket:
    \"snorkel\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |>
    filter(fn: (r) => r[\"_measurement\"] == \"ray_scheduler_tasks\" and r[\"State\"]
    != \"SpilledUnschedulable\" and r[\"State\"] != \"SpilledWaiting\")\n  |> aggregateWindow(every:
    v.windowPeriod, fn: max, createEmpty: false)\n  |> group(columns: [\"_time\",
    \"State\"])\n  |> sum()\n  |> group(columns: [\"State\"])","refId":"A"}],"title":"Ray
    Tasks by State","type":"timeseries"},{"datasource":null,"description":"Shows tasks
    that are currently pending and why","fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisLabel":"","axisPlacement":"auto","barAlignment":0,"drawStyle":"line","fillOpacity":0,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"lineInterpolation":"linear","lineWidth":1,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"auto","spanNulls":false,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":80}]}},"overrides":[]},"gridPos":{"h":8,"w":12,"x":12,"y":0},"id":4,"options":{"legend":{"calcs":[],"displayMode":"list","placement":"bottom"},"tooltip":{"mode":"single"}},"targets":[{"query":"from(bucket:
    \"snorkel\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |>
    filter(fn: (r) => r[\"_measurement\"] == \"ray_scheduler_unscheduleable_tasks\")\n  |>
    aggregateWindow(every: v.windowPeriod, fn: max, createEmpty: false)\n  |> group(columns:
    [\"_time\", \"Reason\"])\n  |> sum()\n  |> group(columns: [\"Reason\"])","refId":"A"}],"title":"Unschedulable
    Tasks By Reason","type":"timeseries"},{"datasource":null,"description":"Spilled
    objects by count/state","fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisLabel":"","axisPlacement":"auto","barAlignment":0,"drawStyle":"line","fillOpacity":0,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"lineInterpolation":"linear","lineWidth":1,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"auto","spanNulls":false,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":80}]}},"overrides":[]},"gridPos":{"h":8,"w":12,"x":0,"y":8},"id":6,"options":{"legend":{"calcs":[],"displayMode":"list","placement":"bottom"},"tooltip":{"mode":"single"}},"targets":[{"query":"from(bucket:
    \"snorkel\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |>
    filter(fn: (r) => r[\"_measurement\"] == \"ray_spill_manager_objects\")\n  |>
    aggregateWindow(every: v.windowPeriod, fn: max, createEmpty: false)\n  |> group(columns:
    [\"_time\", \"State\"])\n  |> sum()\n  |> group(columns: [\"State\"])","refId":"A"}],"title":"Spilled
    Objects by Count","type":"timeseries"},{"datasource":null,"description":"Spilled
    objects by size/state","fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisLabel":"","axisPlacement":"auto","barAlignment":0,"drawStyle":"line","fillOpacity":0,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"lineInterpolation":"linear","lineWidth":1,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"auto","spanNulls":false,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":80}]},"unit":"decbytes"},"overrides":[]},"gridPos":{"h":8,"w":12,"x":12,"y":8},"id":7,"options":{"legend":{"calcs":[],"displayMode":"list","placement":"bottom"},"tooltip":{"mode":"single"}},"targets":[{"query":"from(bucket:
    \"snorkel\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |>
    filter(fn: (r) => r[\"_measurement\"] == \"ray_spill_manager_objects_bytes\")\n  |>
    aggregateWindow(every: v.windowPeriod, fn: max, createEmpty: false)\n  |> group(columns:
    [\"_time\", \"State\"])\n  |> sum()\n  |> group(columns: [\"State\"])","refId":"A"}],"title":"Spilled
    Objects by Size","type":"timeseries"},{"datasource":null,"description":"Number
    of worker failures that are not intentional. For example, worker failures due
    to system related errors\nIf \"Data does not have a time field\" shows up, there
    have been no errors in the time range.","fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisLabel":"","axisPlacement":"auto","barAlignment":0,"drawStyle":"line","fillOpacity":0,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"lineInterpolation":"linear","lineWidth":1,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"auto","spanNulls":false,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":80}]}},"overrides":[]},"gridPos":{"h":8,"w":12,"x":0,"y":16},"id":9,"options":{"legend":{"calcs":[],"displayMode":"list","placement":"bottom"},"tooltip":{"mode":"single"}},"targets":[{"query":"import
    \"experimental/aggregate\"\nfrom(bucket: \"snorkel\")\n  |> range(start: v.timeRangeStart,
    stop: v.timeRangeStop)\n  |> filter(fn: (r) => r[\"_measurement\"] == \"ray_unintentional_worker_failures_total\")\n  |>
    aggregate.rate(\n      every: 1m,\n      unit: 1m,\n  )\n  |> aggregateWindow(every:
    v.windowPeriod, fn: max, createEmpty: true)\n  ","refId":"A"}],"title":"Unintentional
    worker failures","type":"timeseries"},{"datasource":null,"description":"Number
    of tasks that fail to be scheduled because workers were not available.","fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisLabel":"","axisPlacement":"auto","barAlignment":0,"drawStyle":"line","fillOpacity":0,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"lineInterpolation":"linear","lineWidth":1,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"auto","spanNulls":false,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":80}]},"unit":"none"},"overrides":[]},"gridPos":{"h":8,"w":12,"x":12,"y":16},"id":10,"options":{"legend":{"calcs":[],"displayMode":"list","placement":"bottom"},"tooltip":{"mode":"single"}},"targets":[{"query":"from(bucket:
    \"snorkel\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |>
    filter(fn: (r) => r[\"_measurement\"] == \"ray_scheduler_failed_worker_startup_total\")\n  |>
    aggregateWindow(every: v.windowPeriod, fn: max, createEmpty: false)\n  |> keep(columns:
    [\"_time\", \"Reason\", \"hostname\", \"_value\"])","refId":"A"}],"title":"Task
    failures due to worker startup failure","type":"timeseries"}],"refresh":false,"schemaVersion":32,"style":"dark","tags":[],"templating":{"list":[{"allValue":null,"current":{"selected":true,"tags":[],"text":["All"],"value":["$__all"]},"datasource":"influxdb","hide":0,"includeAll":true,"label":null,"multi":true,"name":"hostname","options":[],"query":"import
    \"influxdata/influxdb/v1\"\nv1.tagValues(\n    bucket: v.bucket,\n    tag: \"host\",\n    predicate:
    (r) => true,\n    start: -1y\n)","refresh":1,"regex":"","skipUrlSync":false,"sort":1,"tagValuesQuery":"","tags":[],"tagsQuery":"","type":"query","useTags":false},{"allValue":null,"current":{"selected":true,"tags":[],"text":["All"],"value":["$__all"]},"datasource":"influxdb","hide":0,"includeAll":true,"label":null,"multi":true,"name":"instance_id","options":[],"query":"import
    \"influxdata/influxdb/v1\"\nv1.tagValues(\n    bucket: v.bucket,\n    tag: \"instance_id\",\n    predicate:
    (r) => true,\n    start: -1y\n)","refresh":1,"regex":"","skipUrlSync":false,"sort":1,"tagValuesQuery":"","tags":[],"tagsQuery":"","type":"query","useTags":false}]},"time":{"from":"now-24h","to":"now"},"timezone":"","title":"Ray","uid":"ZhVix4Z4k","version":4}'
  rq_dashboard.json: '{"annotations":{"list":[{"builtIn":1,"datasource":"-- Grafana
    --","enable":true,"hide":true,"iconColor":"rgba(0, 211, 255, 1)","name":"Annotations
    & Alerts","target":{"limit":100,"matchAny":false,"tags":[],"type":"dashboard"},"type":"dashboard"}]},"editable":true,"fiscalYearStartMonth":0,"gnetId":null,"graphTooltip":0,"iteration":1661200899788,"links":[],"liveNow":false,"panels":[{"datasource":null,"description":"Fraction
    of workers that are healthy per-queue. This should be 100% almost all of the time","fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisLabel":"","axisPlacement":"auto","barAlignment":0,"drawStyle":"line","fillOpacity":0,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"lineInterpolation":"linear","lineWidth":1,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"auto","spanNulls":false,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"max":1,"min":0,"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null}]},"unit":"percentunit"},"overrides":[]},"gridPos":{"h":8,"w":12,"x":0,"y":0},"id":4,"options":{"legend":{"calcs":[],"displayMode":"list","placement":"bottom"},"tooltip":{"mode":"single"}},"targets":[{"query":"from(bucket:
    \"snorkel\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |>
    filter(fn: (r) => r[\"_measurement\"] == \"rq_worker_healthy\")\n  |> aggregateWindow(every:
    v.windowPeriod, fn: min, createEmpty: false)\n  |> group(columns: [\"_time\",
    \"queue\"])\n  |> mean()\n  |> group(columns: [\"queue\"])\n  ","refId":"A"}],"title":"Health
    of Queue","type":"timeseries"},{"alert":{"conditions":[{"evaluator":{"params":[0.1],"type":"gt"},"operator":{"type":"and"},"query":{"params":["A","5m","now"]},"reducer":{"params":[],"type":"min"},"type":"query"}],"executionErrorState":"alerting","for":"1h","frequency":"1m","handler":1,"message":"","name":"RQNonZeroBacklog","noDataState":"ok","notifications":[]},"datasource":null,"description":"Number
    of jobs waiting in queue. This should be zero most of the time. Extended period
    of non-zero values indicate jobs are spending significant amounts of time waiting
    for an RQ worker","fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisLabel":"","axisPlacement":"auto","barAlignment":0,"drawStyle":"line","fillOpacity":0,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"lineInterpolation":"linear","lineWidth":1,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"auto","spanNulls":false,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"min":0,"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":80}]}},"overrides":[]},"gridPos":{"h":8,"w":12,"x":12,"y":0},"id":2,"options":{"legend":{"calcs":[],"displayMode":"list","placement":"bottom"},"tooltip":{"mode":"single"}},"targets":[{"query":"from(bucket:
    \"snorkel\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |>
    filter(fn: (r) => r[\"_measurement\"] == \"rq_queue_pending\")\n  |> aggregateWindow(every:
    v.windowPeriod, fn: max, createEmpty: false)\n  |> group(columns: [\"_time\",
    \"queue\"])\n  |> sum()\n  |> group(columns: [\"queue\"])\n  |> yield(name: \"mean\")","refId":"A"}],"title":"Pending
    Queue Size","type":"timeseries"},{"alert":{"conditions":[{"evaluator":{"params":[0.1],"type":"lt"},"operator":{"type":"and"},"query":{"params":["A","5m","now"]},"reducer":{"params":[],"type":"min"},"type":"query"}],"executionErrorState":"alerting","for":"15m","frequency":"1m","handler":1,"name":"RQNoHealthyWorkers","noDataState":"ok","notifications":[]},"datasource":null,"description":"Number
    of healthy workers per-queue.","fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisLabel":"","axisPlacement":"auto","barAlignment":0,"drawStyle":"line","fillOpacity":0,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"lineInterpolation":"linear","lineWidth":1,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"auto","spanNulls":false,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"min":0,"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":80}]}},"overrides":[]},"gridPos":{"h":8,"w":12,"x":0,"y":8},"id":10,"options":{"legend":{"calcs":[],"displayMode":"list","placement":"bottom"},"tooltip":{"mode":"single"}},"targets":[{"query":"from(bucket:
    \"snorkel\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |>
    filter(fn: (r) => r[\"_measurement\"] == \"rq_worker_healthy\")\n  |> aggregateWindow(every:
    v.windowPeriod, fn: min, createEmpty: false)\n  |> group(columns: [\"_time\",
    \"queue\"])\n  |> sum()\n  |> group(columns: [\"queue\"])\n  |> yield(name: \"mean\")","refId":"A"}],"title":"Healthy
    workers per-queue","type":"timeseries"},{"datasource":null,"description":"Fraction
    of workers actively working on a job. If any queue is capped at 100%, indicates
    the queue is under-resourced.","fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisLabel":"","axisPlacement":"auto","barAlignment":0,"drawStyle":"line","fillOpacity":0,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"lineInterpolation":"linear","lineWidth":1,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"auto","spanNulls":false,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"max":1,"min":0,"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null}]},"unit":"percentunit"},"overrides":[]},"gridPos":{"h":8,"w":12,"x":12,"y":8},"id":8,"options":{"legend":{"calcs":[],"displayMode":"list","placement":"bottom"},"tooltip":{"mode":"single"}},"targets":[{"query":"from(bucket:
    \"snorkel\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |>
    filter(fn: (r) => r[\"_measurement\"] == \"rq_worker_busy\")\n  |> aggregateWindow(every:
    v.windowPeriod, fn: max, createEmpty: false)\n  |> group(columns: [\"_time\",
    \"queue\"])\n  |> mean()\n  |> group(columns: [\"queue\"])\n  |> yield(name: \"mean\")","refId":"A"}],"title":"Worker
    utilization per-queue","type":"timeseries"},{"datasource":null,"description":"Last
    time a RQ worker sent a heartbeat. Helps find unresponsive workers.","fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisLabel":"","axisPlacement":"auto","barAlignment":0,"drawStyle":"line","fillOpacity":0,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"lineInterpolation":"linear","lineWidth":1,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"auto","spanNulls":false,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"line+area"}},"mappings":[],"min":0,"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":5000}]},"unit":"ms"},"overrides":[]},"gridPos":{"h":8,"w":12,"x":0,"y":16},"id":6,"options":{"legend":{"calcs":[],"displayMode":"list","placement":"bottom"},"tooltip":{"mode":"single"}},"targets":[{"query":"from(bucket:
    \"snorkel\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |>
    filter(fn: (r) => r[\"_measurement\"] == \"rq_worker_last_heartbeat_sec\")\n  |>
    aggregateWindow(every: v.windowPeriod, fn: max, createEmpty: false)\n  |> keep(columns:
    [\"_time\", \"_value\", \"hostname\", \"worker\"])\n  |> yield(name: \"mean\")","refId":"A"}],"title":"Worker
    Last Heartbeat","type":"timeseries"},{"datasource":null,"description":"Worker
    time spent on current job, if worker has job","fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisLabel":"","axisPlacement":"auto","barAlignment":0,"drawStyle":"line","fillOpacity":0,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"lineInterpolation":"linear","lineWidth":1,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"auto","spanNulls":false,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":80}]},"unit":"s"},"overrides":[]},"gridPos":{"h":8,"w":12,"x":12,"y":16},"id":12,"options":{"legend":{"calcs":[],"displayMode":"list","placement":"bottom"},"tooltip":{"mode":"single"}},"targets":[{"query":"from(bucket:
    \"snorkel\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |>
    filter(fn: (r) => r[\"_measurement\"] == \"rq_worker_job_execution_time\")\n  |>
    aggregateWindow(every: v.windowPeriod, fn: mean, createEmpty: false)\n  |> keep(columns:
    [\"_time\", \"hostname\", \"worker\", \"_value\"])\n  |> yield(name: \"mean\")","refId":"A"}],"title":"Current
    Job Execution","type":"timeseries"}],"schemaVersion":32,"style":"dark","tags":[],"templating":{"list":[{"allValue":null,"current":{"selected":true,"text":["All"],"value":["$__all"]},"datasource":"influxdb","definition":"","description":null,"error":null,"hide":0,"includeAll":true,"label":null,"multi":true,"name":"hostname","options":[],"query":"import
    \"influxdata/influxdb/v1\"\nv1.tagValues(\n    bucket: v.bucket,\n    tag: \"host\",\n    predicate:
    (r) => true,\n    start: -1y\n)","refresh":1,"regex":"","skipUrlSync":false,"sort":1,"tagValuesQuery":"","tags":[],"tagsQuery":"","type":"query","useTags":false},{"allValue":null,"current":{"selected":true,"text":["All"],"value":["$__all"]},"datasource":"influxdb","definition":"","description":null,"error":null,"hide":0,"includeAll":true,"label":null,"multi":true,"name":"instance_id","options":[],"query":"import
    \"influxdata/influxdb/v1\"\nv1.tagValues(\n    bucket: v.bucket,\n    tag: \"instance_id\",\n    predicate:
    (r) => true,\n    start: -1y\n)","refresh":1,"regex":"","skipUrlSync":false,"sort":1,"tagValuesQuery":"","tags":[],"tagsQuery":"","type":"query","useTags":false},{"allValue":null,"current":{"selected":true,"tags":[],"text":["All"],"value":["$__all"]},"datasource":"influxdb","hide":0,"includeAll":true,"label":null,"multi":true,"name":"hostname","options":[],"query":"import
    \"influxdata/influxdb/v1\"\nv1.tagValues(\n    bucket: v.bucket,\n    tag: \"host\",\n    predicate:
    (r) => true,\n    start: -1y\n)","refresh":1,"regex":"","skipUrlSync":false,"sort":1,"tagValuesQuery":"","tags":[],"tagsQuery":"","type":"query","useTags":false},{"allValue":null,"current":{"selected":true,"tags":[],"text":["All"],"value":["$__all"]},"datasource":"influxdb","hide":0,"includeAll":true,"label":null,"multi":true,"name":"instance_id","options":[],"query":"import
    \"influxdata/influxdb/v1\"\nv1.tagValues(\n    bucket: v.bucket,\n    tag: \"instance_id\",\n    predicate:
    (r) => true,\n    start: -1y\n)","refresh":1,"regex":"","skipUrlSync":false,"sort":1,"tagValuesQuery":"","tags":[],"tagsQuery":"","type":"query","useTags":false}]},"time":{"from":"now-24h","to":"now"},"timezone":"","title":"RQ","uid":"1GfYnLzVz","version":1}'
  studio_dashboard.json: '{"annotations":{"list":[{"builtIn":1,"datasource":"-- Grafana
    --","enable":true,"hide":true,"iconColor":"rgba(0, 211, 255, 1)","name":"Annotations
    & Alerts","type":"dashboard"}]},"editable":true,"gnetId":null,"graphTooltip":0,"links":[],"panels":[{"bars":false,"dashLength":10,"dashes":false,"datasource":null,"description":"Number
    of LFs applied to Studio sample","fieldConfig":{"defaults":{"custom":{"align":null,"filterable":false},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":80}]}},"overrides":[]},"fill":1,"fillGradient":0,"gridPos":{"h":8,"w":12,"x":0,"y":0},"hiddenSeries":false,"id":4,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"7.5.12","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"groupBy":[{"params":["$__interval"],"type":"time"},{"params":["null"],"type":"fill"}],"orderByTime":"ASC","policy":"default","query":"from(bucket:
    \"snorkel\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |>
    filter(fn: (r) => r[\"host\"] =~ /^${hostname:regex}$/)\n  |> filter(fn: (r) =>
    not exists r[\"instance_id\"] or r[\"instance_id\"] =~ /^${instance_id:regex}$/)\n  |>
    filter(fn: (r) => r[\"_measurement\"] == \"lf_apply\")\n  |> filter(fn: (r) =>
    r[\"_field\"] == \"value\")\n  |> aggregateWindow(every: 10m, fn: sum, createEmpty:
    false)\n  |> map(fn: (r) => ({ r with\n    _value: r._value,\n    _field: \"Num
    Applies\",\n    }))\n  |> yield(name: \"sum\")","refId":"A","resultFormat":"time_series","select":[[{"params":["value"],"type":"field"},{"params":[],"type":"mean"}]],"tags":[]}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Studio
    LF Applies","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}}],"refresh":"30s","schemaVersion":26,"style":"dark","tags":[],"templating":{"list":[{"allValue":null,"current":{"selected":true,"tags":[],"text":["All"],"value":["$__all"]},"datasource":"influxdb","hide":0,"includeAll":true,"label":null,"multi":true,"name":"hostname","options":[],"query":"import
    \"influxdata/influxdb/v1\"\nv1.tagValues(\n    bucket: v.bucket,\n    tag: \"host\",\n    predicate:
    (r) => true,\n    start: -1y\n)","refresh":1,"regex":"","skipUrlSync":false,"sort":1,"tagValuesQuery":"","tags":[],"tagsQuery":"","type":"query","useTags":false},{"allValue":null,"current":{"selected":true,"tags":[],"text":["All"],"value":["$__all"]},"datasource":"influxdb","hide":0,"includeAll":true,"label":null,"multi":true,"name":"instance_id","options":[],"query":"import
    \"influxdata/influxdb/v1\"\nv1.tagValues(\n    bucket: v.bucket,\n    tag: \"instance_id\",\n    predicate:
    (r) => true,\n    start: -1y\n)","refresh":1,"regex":"","skipUrlSync":false,"sort":1,"tagValuesQuery":"","tags":[],"tagsQuery":"","type":"query","useTags":false}]},"time":{"from":"now-6h","to":"now"},"timezone":"","title":"Studio","uid":"vTqPO-0Mz","version":1}'
  system_dashboard.json: '{"__inputs":[],"annotations":{"list":[]},"description":"","editable":true,"gnetId":null,"hideControls":false,"id":null,"links":[],"panels":[{"cacheTimeout":null,"datasource":null,"description":"All
    mounts matching /dev/*, not including overlay mounts.","editable":true,"error":false,"fieldConfig":{"defaults":{"thresholds":{"mode":"absolute","steps":[]}}},"height":null,"gridPos":{"h":8,"w":12,"x":0,"y":0},"hideTimeOverride":false,"id":1,"interval":null,"links":[],"maxDataPoints":null,"minSpan":null,"repeat":null,"repeatDirection":null,"maxPerRow":null,"span":null,"targets":[{"query":"from(bucket:
    \"snorkel\")\n    |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n    |>
    filter(fn: (r) => r[\"machine\"] =~ /^(tdm-api|db|influxdb)/)\n    |> filter(fn:
    (r) => r[\"_field\"] == \"value\")\n    |> filter(fn: (r) => r[\"device\"] =~
    /\\/dev(\\/(xvda|nvme).*)$/)\n    |> filter(fn: (r) => r._measurement =~ /fs_(usage|limit)/
    )\n    |> keep(columns: [\"device\", \"_time\", \"_value\", \"machine\", \"type\",
    \"_field\"])\n    |> aggregateWindow(every: 1m, fn: mean)\n    |> sort(columns:
    [\"_time\"])\n    |> pivot(rowKey:[\"_time\"], columnKey: [\"type\"], valueColumn:
    \"_value\")\n    |> map(fn: (r) => ({ r with _value: r.usage / r.limit * 100.0,
    _measurement: \"FS %\" }))\n    |> keep(columns: [\"device\", \"_time\", \"_value\",
    \"machine\"])","resultFormat":"time_series","alias":"","measurement":"","rawQuery":true,"refId":"A"}],"timeFrom":null,"timeShift":null,"title":"Disk
    Usage on Important Mounts","transparent":false,"transformations":[],"bars":false,"fill":1,"grid":{"threshold1":null,"threshold1Color":"rgba(216,
    200, 27, 0.27)","threshold2":null,"threshold2Color":"rgba(234, 112, 112, 0.22)"},"isNew":true,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false,"alignAsTable":false,"hideEmpty":false,"hideZero":false,"rightSide":false,"sideWidth":null,"sort":null,"sortDesc":false},"lines":true,"linewidth":2,"nullPointMode":"connected","options":{"dataLinks":[],"alertThreshold":true},"percentage":false,"pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"stack":false,"steppedLine":false,"tooltip":{"msResolution":true,"shared":true,"sort":0,"value_type":"cumulative"},"thresholds":[],"type":"graph","xaxis":{"mode":"time","name":null,"values":[],"show":true},"yaxes":[{"decimals":null,"format":"percent","label":null,"logBase":1,"max":null,"min":null,"show":true},{"decimals":null,"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":0},"alert":{"conditions":[{"evaluator":{"type":"gt","params":[90]},"operator":{"type":"and"},"query":{"model":{"query":"","resultFormat":"time_series","alias":"","measurement":"","rawQuery":true,"refId":"A"},"params":["A","5m","now"]},"reducer":{"params":[],"type":"max"},"type":"query"}],"executionErrorState":"alerting","frequency":"60s","handler":1,"message":"","name":"Disk
    Usage on Important Mounts alert","noDataState":"ok","notifications":[{"uid":"pagerduty"}],"for":"15m"}},{"cacheTimeout":null,"datasource":null,"description":null,"editable":true,"error":false,"fieldConfig":{"defaults":{"thresholds":{"mode":"absolute","steps":[]}}},"height":null,"gridPos":{"h":8,"w":12,"x":12,"y":0},"hideTimeOverride":false,"id":2,"interval":null,"links":[],"maxDataPoints":null,"minSpan":null,"repeat":null,"repeatDirection":null,"maxPerRow":null,"span":null,"targets":[{"query":"from(bucket:
    \"snorkel\")\n    |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n    |>
    filter(fn: (r) => r[\"_measurement\"] == \"memory_rss\")\n    |> group(columns:
    [\"machine\"])\n    |> aggregateWindow(every: v.windowPeriod, fn: mean, createEmpty:
    false)\n    |> yield(name: \"mean\")","resultFormat":"time_series","alias":"","measurement":"","rawQuery":true,"refId":"A"}],"timeFrom":null,"timeShift":null,"title":"Service
    Memory RSS","transparent":false,"transformations":[],"bars":false,"fill":1,"grid":{"threshold1":null,"threshold1Color":"rgba(216,
    200, 27, 0.27)","threshold2":null,"threshold2Color":"rgba(234, 112, 112, 0.22)"},"isNew":true,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false,"alignAsTable":false,"hideEmpty":false,"hideZero":false,"rightSide":false,"sideWidth":null,"sort":null,"sortDesc":false},"lines":true,"linewidth":2,"nullPointMode":"connected","options":{"dataLinks":[],"alertThreshold":true},"percentage":false,"pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"stack":false,"steppedLine":false,"tooltip":{"msResolution":true,"shared":true,"sort":0,"value_type":"cumulative"},"thresholds":[],"type":"graph","xaxis":{"mode":"time","name":null,"values":[],"show":true},"yaxes":[{"decimals":null,"format":"bytes","label":null,"logBase":1,"max":null,"min":null,"show":true},{"decimals":null,"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":0}},{"cacheTimeout":null,"datasource":null,"description":null,"editable":true,"error":false,"fieldConfig":{"defaults":{"thresholds":{"mode":"absolute","steps":[]}}},"height":null,"gridPos":{"h":8,"w":12,"x":0,"y":8},"hideTimeOverride":false,"id":3,"interval":null,"links":[],"maxDataPoints":null,"minSpan":null,"repeat":null,"repeatDirection":null,"maxPerRow":null,"span":null,"targets":[{"query":"import
    \"experimental/aggregate\"\nfrom(bucket: \"snorkel\")\n    |> range(start: v.timeRangeStart,
    stop: v.timeRangeStop)\n    |> filter(fn: (r) => r[\"_measurement\"] == \"cpu_usage_total\")\n    |>
    toFloat()\n    |> map(fn: (r) => ({\n        r with\n        _value: r._value
    / 10000000.0\n        })\n    )\n    |> aggregate.rate(every: 2m, groupColumns:
    [\"machine\"],unit: 1s)\n    |> aggregateWindow(every: v.windowPeriod, fn: mean,
    createEmpty: false)\n    |> yield(name: \"mean\")","resultFormat":"time_series","alias":"","measurement":"","rawQuery":true,"refId":"A"}],"timeFrom":null,"timeShift":null,"title":"Service
    CPU Utilization","transparent":false,"transformations":[],"bars":false,"fill":1,"grid":{"threshold1":null,"threshold1Color":"rgba(216,
    200, 27, 0.27)","threshold2":null,"threshold2Color":"rgba(234, 112, 112, 0.22)"},"isNew":true,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false,"alignAsTable":false,"hideEmpty":false,"hideZero":false,"rightSide":false,"sideWidth":null,"sort":null,"sortDesc":false},"lines":true,"linewidth":2,"nullPointMode":"connected","options":{"dataLinks":[],"alertThreshold":true},"percentage":false,"pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"stack":false,"steppedLine":false,"tooltip":{"msResolution":true,"shared":true,"sort":0,"value_type":"cumulative"},"thresholds":[],"type":"graph","xaxis":{"mode":"time","name":null,"values":[],"show":true},"yaxes":[{"decimals":null,"format":"percent","label":null,"logBase":1,"max":null,"min":null,"show":true},{"decimals":null,"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":0}},{"cacheTimeout":null,"datasource":null,"description":null,"editable":true,"error":false,"fieldConfig":{"defaults":{"thresholds":{"mode":"absolute","steps":[]}}},"height":null,"gridPos":{"h":8,"w":12,"x":12,"y":8},"hideTimeOverride":false,"id":4,"interval":null,"links":[],"maxDataPoints":null,"minSpan":null,"repeat":null,"repeatDirection":null,"maxPerRow":null,"span":null,"targets":[{"query":"from(bucket:
    \"snorkel\")\n    |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n    |>
    filter(fn: (r) => r[\"_measurement\"] == \"run_engine_job\")\n    |> filter(fn:
    (r) => r[\"_field\"] == \"99.9_percentile\")\n    |> map(fn: (r) => ({\n        r
    with\n        _field: r.queue_name + \".\" + r.function\n    }))\n    |> drop(columns:
    [\"host\", \"metric_type\", \"queue_name\", \"function\", \"_measurement\"])","resultFormat":"time_series","alias":"","measurement":"","rawQuery":true,"refId":"A"}],"timeFrom":null,"timeShift":null,"title":"Engine
    Job Latency","transparent":false,"transformations":[],"bars":false,"fill":1,"grid":{"threshold1":null,"threshold1Color":"rgba(216,
    200, 27, 0.27)","threshold2":null,"threshold2Color":"rgba(234, 112, 112, 0.22)"},"isNew":true,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false,"alignAsTable":false,"hideEmpty":false,"hideZero":false,"rightSide":false,"sideWidth":null,"sort":null,"sortDesc":false},"lines":true,"linewidth":2,"nullPointMode":"connected","options":{"dataLinks":[],"alertThreshold":true},"percentage":false,"pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"stack":false,"steppedLine":false,"tooltip":{"msResolution":true,"shared":true,"sort":0,"value_type":"cumulative"},"thresholds":[],"type":"graph","xaxis":{"mode":"time","name":null,"values":[],"show":true},"yaxes":[{"decimals":null,"format":"ms","label":null,"logBase":1,"max":null,"min":null,"show":true},{"decimals":null,"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":0}},{"cacheTimeout":null,"datasource":null,"description":null,"editable":true,"error":false,"fieldConfig":{"defaults":{"thresholds":{"mode":"absolute","steps":[]}}},"height":null,"gridPos":{"h":8,"w":12,"x":0,"y":16},"hideTimeOverride":false,"id":5,"interval":null,"links":[],"maxDataPoints":null,"minSpan":null,"repeat":null,"repeatDirection":null,"maxPerRow":null,"span":null,"targets":[{"query":"from(bucket:
    \"snorkel\")\n    |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n    |>
    filter(fn: (r) => r[\"_measurement\"] == \"StudioDataset_get_df_and_index\" or
    r[\"_measurement\"] == \"StudioDataset_get_df_subset\")\n    |> filter(fn: (r)
    => r[\"_field\"] == \"value\")\n    |> filter(fn: (r) => r[\"metric_type\"] ==
    \"counter\")\n    |> aggregateWindow(every: v.windowPeriod, fn: mean, createEmpty:
    false)\n    |> movingAverage(n: 3)\n    |> yield(name: \"mean\")","resultFormat":"time_series","alias":"","measurement":"","rawQuery":true,"refId":"A"}],"timeFrom":null,"timeShift":null,"title":"Arrow
    vs Dask calls","transparent":false,"transformations":[],"bars":false,"fill":1,"grid":{"threshold1":null,"threshold1Color":"rgba(216,
    200, 27, 0.27)","threshold2":null,"threshold2Color":"rgba(234, 112, 112, 0.22)"},"isNew":true,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false,"alignAsTable":false,"hideEmpty":false,"hideZero":false,"rightSide":false,"sideWidth":null,"sort":null,"sortDesc":false},"lines":true,"linewidth":2,"nullPointMode":"connected","options":{"dataLinks":[],"alertThreshold":true},"percentage":false,"pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"stack":false,"steppedLine":false,"tooltip":{"msResolution":true,"shared":true,"sort":0,"value_type":"cumulative"},"thresholds":[],"type":"graph","xaxis":{"mode":"time","name":null,"values":[],"show":true},"yaxes":[{"decimals":null,"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true},{"decimals":null,"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":0}},{"cacheTimeout":null,"datasource":null,"description":null,"editable":true,"error":false,"fieldConfig":{"defaults":{"thresholds":{"mode":"absolute","steps":[]}}},"height":null,"gridPos":{"h":8,"w":12,"x":12,"y":16},"hideTimeOverride":false,"id":6,"interval":null,"links":[],"maxDataPoints":null,"minSpan":null,"repeat":null,"repeatDirection":null,"maxPerRow":null,"span":null,"targets":[{"query":"from(bucket:
    \"snorkel\")\n    |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n    |>
    filter(fn: (r) => r[\"_measurement\"] == \"api_requests_all\")\n    |> map(fn:
    (r) => ({\n        _time: r._time,\n        _value: r._value,\n        _field:
    r.api_name + \": \" + r.method + \" \" + r.path + \" \" + r.status_code,\n    }))","resultFormat":"time_series","alias":"","measurement":"","rawQuery":true,"refId":"A"}],"timeFrom":null,"timeShift":null,"title":"All
    API Traffic","transparent":false,"transformations":[],"bars":false,"fill":1,"grid":{"threshold1":null,"threshold1Color":"rgba(216,
    200, 27, 0.27)","threshold2":null,"threshold2Color":"rgba(234, 112, 112, 0.22)"},"isNew":true,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false,"alignAsTable":false,"hideEmpty":false,"hideZero":false,"rightSide":false,"sideWidth":null,"sort":null,"sortDesc":false},"lines":true,"linewidth":2,"nullPointMode":"connected","options":{"dataLinks":[],"alertThreshold":true},"percentage":false,"pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"stack":false,"steppedLine":false,"tooltip":{"msResolution":true,"shared":true,"sort":0,"value_type":"cumulative"},"thresholds":[],"type":"graph","xaxis":{"mode":"time","name":null,"values":[],"show":true},"yaxes":[{"decimals":null,"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true},{"decimals":null,"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":0}},{"cacheTimeout":null,"datasource":null,"description":null,"editable":true,"error":false,"fieldConfig":{"defaults":{"thresholds":{"mode":"absolute","steps":[]}}},"height":null,"gridPos":{"h":8,"w":12,"x":0,"y":24},"hideTimeOverride":false,"id":7,"interval":null,"links":[],"maxDataPoints":null,"minSpan":null,"repeat":null,"repeatDirection":null,"maxPerRow":null,"span":null,"targets":[{"query":"started
    = from(bucket: \"snorkel\")\n    |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n    |>
    filter(fn: (r) => r[\"_measurement\"] == \"engine_job_state\" and r[\"state\"]
    == \"started\" and r[\"metric_type\"] == \"gauge\")\n    |> keep(columns: [\"state\",
    \"job_type\", \"_value\", \"_time\"])\n    |> group(columns: [\"job_type\"])\n    |>
    aggregateWindow(every: v.windowPeriod, fn: mean, createEmpty: true)\n    |> fill(usePrevious:
    true)\n\n    finished = from(bucket: \"snorkel\")\n    |> range(start: v.timeRangeStart,
    stop: v.timeRangeStop)\n    |> filter(fn: (r) => r[\"_measurement\"] == \"engine_job_state\"
    and r[\"state\"] == \"finished\" and r[\"metric_type\"] == \"gauge\")\n    |>
    keep(columns: [\"state\", \"job_type\", \"_value\", \"_time\"])\n    |> group(columns:
    [\"job_type\"])\n    |> aggregateWindow(every: v.windowPeriod, fn: mean, createEmpty:
    true)\n    |> fill(usePrevious: true)\n\n    join(tables:{started:started, finished:finished},
    on:[\"_start\", \"_stop\", \"_time\", \"job_type\"])\n    |> group()\n    |> map(fn:
    (r) => ({\n        r with\n        _value: int(v: r._value_started - r._value_finished
    + 0.99)\n        }))\n    |> group(columns: [\"job_type\"])\n    |> yield()","resultFormat":"time_series","alias":"","measurement":"","rawQuery":true,"refId":"A"}],"timeFrom":null,"timeShift":null,"title":"Running
    jobs","transparent":false,"transformations":[],"bars":false,"fill":1,"grid":{"threshold1":null,"threshold1Color":"rgba(216,
    200, 27, 0.27)","threshold2":null,"threshold2Color":"rgba(234, 112, 112, 0.22)"},"isNew":true,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false,"alignAsTable":false,"hideEmpty":false,"hideZero":false,"rightSide":false,"sideWidth":null,"sort":null,"sortDesc":false},"lines":true,"linewidth":2,"nullPointMode":"connected","options":{"dataLinks":[],"alertThreshold":true},"percentage":false,"pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"stack":true,"steppedLine":false,"tooltip":{"msResolution":true,"shared":true,"sort":0,"value_type":"cumulative"},"thresholds":[],"type":"graph","xaxis":{"mode":"time","name":null,"values":[],"show":true},"yaxes":[{"decimals":null,"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true},{"decimals":null,"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":0}},{"cacheTimeout":null,"datasource":null,"description":null,"editable":true,"error":false,"fieldConfig":{"defaults":{"thresholds":{"mode":"absolute","steps":[]}}},"height":null,"gridPos":{"h":8,"w":12,"x":12,"y":24},"hideTimeOverride":false,"id":8,"interval":null,"links":[],"maxDataPoints":null,"minSpan":null,"repeat":null,"repeatDirection":null,"maxPerRow":null,"span":null,"targets":[{"query":"from(bucket:
    \"snorkel\")\n    |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n    |>
    filter(fn: (r) => r[\"_measurement\"] == \"api_requests_4xx\")\n    |> map(fn:
    (r) => ({\n        _field: r.api_name + \": \" + r.method + \" \" + r.path + \"
    \" + r.status_code,\n        _time: r._time,\n        _value: r._value\n    }))","resultFormat":"time_series","alias":"","measurement":"","rawQuery":true,"refId":"A"}],"timeFrom":null,"timeShift":null,"title":"API
    4xx Errors","transparent":false,"transformations":[],"bars":false,"fill":1,"grid":{"threshold1":null,"threshold1Color":"rgba(216,
    200, 27, 0.27)","threshold2":null,"threshold2Color":"rgba(234, 112, 112, 0.22)"},"isNew":true,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false,"alignAsTable":false,"hideEmpty":false,"hideZero":false,"rightSide":false,"sideWidth":null,"sort":null,"sortDesc":false},"lines":true,"linewidth":2,"nullPointMode":"connected","options":{"dataLinks":[],"alertThreshold":true},"percentage":false,"pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"stack":false,"steppedLine":false,"tooltip":{"msResolution":true,"shared":true,"sort":0,"value_type":"cumulative"},"thresholds":[],"type":"graph","xaxis":{"mode":"time","name":null,"values":[],"show":true},"yaxes":[{"decimals":null,"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true},{"decimals":null,"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":0}},{"cacheTimeout":null,"datasource":null,"description":null,"editable":true,"error":false,"fieldConfig":{"defaults":{"thresholds":{"mode":"absolute","steps":[]}}},"height":null,"gridPos":{"h":8,"w":12,"x":0,"y":32},"hideTimeOverride":false,"id":9,"interval":null,"links":[],"maxDataPoints":null,"minSpan":null,"repeat":null,"repeatDirection":null,"maxPerRow":null,"span":null,"targets":[{"query":"from(bucket:
    \"snorkel\")\n    |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n    |>
    filter(fn: (r) => r[\"_measurement\"] == \"mem\" and r[\"_field\"] == \"used_percent\")\n    |>
    map(fn: (r) => ({\n        r with\n        _field: \"mem_used\"\n        }))\n    |>
    aggregateWindow(every: v.windowPeriod, fn: mean, createEmpty: false)\n    |> yield(name:
    \"mean\")","resultFormat":"time_series","alias":"","measurement":"","rawQuery":true,"refId":"A"}],"timeFrom":null,"timeShift":null,"title":"Host
    Resource Usage","transparent":false,"transformations":[],"bars":false,"fill":1,"grid":{"threshold1":null,"threshold1Color":"rgba(216,
    200, 27, 0.27)","threshold2":null,"threshold2Color":"rgba(234, 112, 112, 0.22)"},"isNew":true,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false,"alignAsTable":false,"hideEmpty":false,"hideZero":false,"rightSide":false,"sideWidth":null,"sort":null,"sortDesc":false},"lines":true,"linewidth":2,"nullPointMode":"connected","options":{"dataLinks":[],"alertThreshold":true},"percentage":false,"pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"stack":false,"steppedLine":false,"tooltip":{"msResolution":true,"shared":true,"sort":0,"value_type":"cumulative"},"thresholds":[],"type":"graph","xaxis":{"mode":"time","name":null,"values":[],"show":true},"yaxes":[{"decimals":null,"format":"percent","label":null,"logBase":1,"max":null,"min":null,"show":true},{"decimals":null,"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":0}},{"cacheTimeout":null,"datasource":null,"description":null,"editable":true,"error":false,"fieldConfig":{"defaults":{"thresholds":{"mode":"absolute","steps":[]}}},"height":null,"gridPos":{"h":8,"w":12,"x":12,"y":32},"hideTimeOverride":false,"id":10,"interval":null,"links":[],"maxDataPoints":null,"minSpan":null,"repeat":null,"repeatDirection":null,"maxPerRow":null,"span":null,"targets":[{"query":"from(bucket:
    \"snorkel\")\n    |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n    |>
    filter(fn: (r) => r[\"_measurement\"] == \"api_requests_latency\")\n    |> filter(fn:
    (r) => r[\"_field\"] == \"99.9_percentile\")\n    |> map(fn: (r) => ({\n        _field:
    r.api_name + \": \" + r.method + \" \" + r.path + \" \" + r.status_code,\n        _time:
    r._time,\n        _value: r._value\n    }))","resultFormat":"time_series","alias":"","measurement":"","rawQuery":true,"refId":"A"}],"timeFrom":null,"timeShift":null,"title":"P99.9
    API Latency","transparent":false,"transformations":[],"bars":false,"fill":1,"grid":{"threshold1":null,"threshold1Color":"rgba(216,
    200, 27, 0.27)","threshold2":null,"threshold2Color":"rgba(234, 112, 112, 0.22)"},"isNew":true,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false,"alignAsTable":false,"hideEmpty":false,"hideZero":false,"rightSide":false,"sideWidth":null,"sort":null,"sortDesc":false},"lines":true,"linewidth":2,"nullPointMode":"connected","options":{"dataLinks":[],"alertThreshold":true},"percentage":false,"pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"stack":false,"steppedLine":false,"tooltip":{"msResolution":true,"shared":true,"sort":0,"value_type":"cumulative"},"thresholds":[],"type":"graph","xaxis":{"mode":"time","name":null,"values":[],"show":true},"yaxes":[{"decimals":null,"format":"ms","label":null,"logBase":1,"max":null,"min":null,"show":true},{"decimals":null,"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":0}},{"cacheTimeout":null,"datasource":null,"description":null,"editable":true,"error":false,"fieldConfig":{"defaults":{"thresholds":{"mode":"absolute","steps":[]}}},"height":null,"gridPos":{"h":8,"w":12,"x":0,"y":40},"hideTimeOverride":false,"id":11,"interval":null,"links":[],"maxDataPoints":null,"minSpan":null,"repeat":null,"repeatDirection":null,"maxPerRow":null,"span":null,"targets":[{"query":"from(bucket:
    \"snorkel\")\n|> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n|> filter(fn:
    (r) => r[\"_measurement\"] == \"api_requests_latency\")\n|> filter(fn: (r) =>
    r[\"_field\"] == \"100_percentile\")\n|> map(fn: (r) => ({\n    _field: r.api_name
    + \": \" + r.method + \" \" + r.path + \" \" + r.status_code,\n    _time: r._time,\n    _value:
    r._value\n    }))\n// Exclude known slow endpoints to prevent unnecessary alerting\n//
    Please file a story to speed up the endpoint before excluding\n|> filter(fn: (r)
    => r[\"_field\"] !~ /Snorkel TDM: GET \\/tasks\\/NNN\\/lf-labels \\d\\d\\d/)\n|>
    filter(fn: (r) => r[\"_field\"] !~ /Flow UI: GET \\/api\\/tasks\\/\\d{1,5}\\/lf-labels
    \\d\\d\\d/)","resultFormat":"time_series","alias":"","measurement":"","rawQuery":true,"refId":"A"}],"timeFrom":null,"timeShift":null,"title":"P100
    API Latency","transparent":false,"transformations":[],"bars":false,"fill":1,"grid":{"threshold1":null,"threshold1Color":"rgba(216,
    200, 27, 0.27)","threshold2":null,"threshold2Color":"rgba(234, 112, 112, 0.22)"},"isNew":true,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false,"alignAsTable":false,"hideEmpty":false,"hideZero":false,"rightSide":false,"sideWidth":null,"sort":null,"sortDesc":false},"lines":false,"linewidth":2,"nullPointMode":"connected","options":{"dataLinks":[],"alertThreshold":true},"percentage":false,"pointradius":2,"points":true,"renderer":"flot","seriesOverrides":[],"stack":false,"steppedLine":false,"tooltip":{"msResolution":true,"shared":true,"sort":0,"value_type":"cumulative"},"thresholds":[],"type":"graph","xaxis":{"mode":"time","name":null,"values":[],"show":true},"yaxes":[{"decimals":null,"format":"ms","label":null,"logBase":1,"max":null,"min":null,"show":true},{"decimals":null,"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":0},"alert":{"conditions":[{"evaluator":{"type":"gt","params":[300000]},"operator":{"type":"and"},"query":{"model":{"query":"","resultFormat":"time_series","alias":"","measurement":"","rawQuery":true,"refId":"A"},"params":["A","5m","now"]},"reducer":{"params":[],"type":"max"},"type":"query"}],"executionErrorState":"alerting","frequency":"60s","handler":1,"message":"Server
    endpoint latency exceeds Envoy threshold of 300 seconds. See the grafana system
    dashboard P100 API Latency panel for more information. To avoid unnecessary alerting,
    please exempt the endpoint and create a Shortcut issue to resolve.","name":"P100
    API Latency alert","noDataState":"ok","notifications":[{"uid":"pagerduty"}],"for":"15m"}},{"cacheTimeout":null,"datasource":null,"description":null,"editable":true,"error":false,"fieldConfig":{"defaults":{"thresholds":{"mode":"absolute","steps":[]}}},"height":null,"gridPos":{"h":8,"w":12,"x":12,"y":40},"hideTimeOverride":false,"id":12,"interval":null,"links":[],"maxDataPoints":null,"minSpan":null,"repeat":null,"repeatDirection":null,"maxPerRow":null,"span":null,"targets":[{"query":"from(bucket:
    \"snorkel\")\n    |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n    |>
    filter(fn: (r) => r[\"_measurement\"] == \"api_requests_latency\")\n    |> filter(fn:
    (r) => r[\"_field\"] == \"99.9_percentile\")\n    |> filter(fn: (r) => r.path
    == \"/tasks/NNN/models/NNN/clarity-matrix\")","resultFormat":"time_series","alias":"","measurement":"","rawQuery":true,"refId":"A"}],"timeFrom":null,"timeShift":null,"title":"Latency
    Alert for Clarity Matrix","transparent":false,"transformations":[],"bars":false,"fill":1,"grid":{"threshold1":null,"threshold1Color":"rgba(216,
    200, 27, 0.27)","threshold2":null,"threshold2Color":"rgba(234, 112, 112, 0.22)"},"isNew":true,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false,"alignAsTable":false,"hideEmpty":false,"hideZero":false,"rightSide":false,"sideWidth":null,"sort":null,"sortDesc":false},"lines":true,"linewidth":2,"nullPointMode":"connected","options":{"dataLinks":[],"alertThreshold":true},"percentage":false,"pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"stack":false,"steppedLine":false,"tooltip":{"msResolution":true,"shared":true,"sort":0,"value_type":"cumulative"},"thresholds":[],"type":"graph","xaxis":{"mode":"time","name":null,"values":[],"show":true},"yaxes":[{"decimals":null,"format":"ms","label":null,"logBase":1,"max":null,"min":null,"show":true},{"decimals":null,"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":0},"alert":{"conditions":[{"evaluator":{"type":"gt","params":[20000]},"operator":{"type":"and"},"query":{"model":{"query":"","resultFormat":"time_series","alias":"","measurement":"","rawQuery":true,"refId":"A"},"params":["A","5m","now"]},"reducer":{"params":[],"type":"max"},"type":"query"}],"executionErrorState":"alerting","frequency":"60s","handler":1,"message":"","name":"Latency
    Alert for Clarity Matrix","noDataState":"ok","notifications":[{"uid":"pagerduty"}],"for":"15m"}},{"cacheTimeout":null,"datasource":null,"description":null,"editable":true,"error":false,"fieldConfig":{"defaults":{"thresholds":{"mode":"absolute","steps":[]}}},"height":null,"gridPos":{"h":8,"w":12,"x":0,"y":48},"hideTimeOverride":false,"id":13,"interval":null,"links":[],"maxDataPoints":null,"minSpan":null,"repeat":null,"repeatDirection":null,"maxPerRow":null,"span":null,"targets":[{"query":"import
    \"experimental/aggregate\"\nfrom(bucket: \"snorkel\")\n|> range(start: v.timeRangeStart,
    stop: v.timeRangeStop)\n\n|> filter(fn: (r) => r[\"_measurement\"] == \"memory_rss\")\n|>
    aggregate.rate(every: 2m, groupColumns: [\"machine\"],unit: 1s)\n|> group(columns:
    [\"_measurement\"])\n|> map(fn: (r) => ({\n    r with\n    _value: (r._value +
    1.0) / (r._value + 1.0)\n    })\n)\n|> aggregateWindow(every: v.windowPeriod,
    fn: sum, createEmpty: false)\n|> yield(name: \"mean\")","resultFormat":"time_series","alias":"","measurement":"","rawQuery":true,"refId":"A"}],"timeFrom":null,"timeShift":null,"title":"Number
    of Containers Running","transparent":false,"transformations":[],"bars":false,"fill":1,"grid":{"threshold1":null,"threshold1Color":"rgba(216,
    200, 27, 0.27)","threshold2":null,"threshold2Color":"rgba(234, 112, 112, 0.22)"},"isNew":true,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false,"alignAsTable":false,"hideEmpty":false,"hideZero":false,"rightSide":false,"sideWidth":null,"sort":null,"sortDesc":false},"lines":true,"linewidth":2,"nullPointMode":"connected","options":{"dataLinks":[],"alertThreshold":true},"percentage":false,"pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"stack":false,"steppedLine":false,"tooltip":{"msResolution":true,"shared":true,"sort":0,"value_type":"cumulative"},"thresholds":[],"type":"graph","xaxis":{"mode":"time","name":null,"values":[],"show":true},"yaxes":[{"decimals":null,"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true},{"decimals":null,"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":0}},{"cacheTimeout":null,"datasource":null,"description":null,"editable":true,"error":false,"fieldConfig":{"defaults":{"thresholds":{"mode":"absolute","steps":[]}}},"height":null,"gridPos":{"h":8,"w":12,"x":12,"y":48},"hideTimeOverride":false,"id":14,"interval":null,"links":[],"maxDataPoints":null,"minSpan":null,"repeat":null,"repeatDirection":null,"maxPerRow":null,"span":null,"targets":[{"query":"from(bucket:
    \"snorkel\")\n    |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n    |>
    filter(fn: (r) => r[\"_measurement\"] == \"mem\" and r[\"_field\"] == \"used_percent\")\n    |>
    map(fn: (r) => ({\n        r with\n        _field: \"mem_used\"\n        }))\n    |>
    aggregateWindow(every: v.windowPeriod, fn: mean, createEmpty: false)\n    |> yield(name:
    \"mean\")","resultFormat":"time_series","alias":"","measurement":"","rawQuery":true,"refId":"A"}],"timeFrom":null,"timeShift":null,"title":"Memory
    Usage (for alerting)","transparent":false,"transformations":[],"bars":false,"fill":1,"grid":{"threshold1":null,"threshold1Color":"rgba(216,
    200, 27, 0.27)","threshold2":null,"threshold2Color":"rgba(234, 112, 112, 0.22)"},"isNew":true,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false,"alignAsTable":false,"hideEmpty":false,"hideZero":false,"rightSide":false,"sideWidth":null,"sort":null,"sortDesc":false},"lines":true,"linewidth":2,"nullPointMode":"connected","options":{"dataLinks":[],"alertThreshold":true},"percentage":false,"pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"stack":false,"steppedLine":false,"tooltip":{"msResolution":true,"shared":true,"sort":0,"value_type":"cumulative"},"thresholds":[],"type":"graph","xaxis":{"mode":"time","name":null,"values":[],"show":true},"yaxes":[{"decimals":null,"format":"percent","label":null,"logBase":1,"max":null,"min":null,"show":true},{"decimals":null,"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":0}},{"cacheTimeout":null,"datasource":null,"description":null,"editable":true,"error":false,"fieldConfig":{"defaults":{"thresholds":{"mode":"absolute","steps":[]}}},"height":null,"gridPos":{"h":8,"w":12,"x":0,"y":56},"hideTimeOverride":false,"id":15,"interval":null,"links":[],"maxDataPoints":null,"minSpan":null,"repeat":null,"repeatDirection":null,"maxPerRow":null,"span":null,"targets":[{"query":"from(bucket:
    \"snorkel\")\n    |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n\n    |>
    filter(fn: (r) => r[\"_measurement\"] == \"api_requests_5xx\")\n    |> map(fn:
    (r) => ({\n            _field: r.api_name + \": \" + r.method + \" \" + r.path
    + \" \" + r.status_code,\n            _time: r._time,\n            _value: r._value\n    }))","resultFormat":"time_series","alias":"","measurement":"","rawQuery":true,"refId":"A"}],"timeFrom":null,"timeShift":null,"title":"5xx
    Errors","transparent":false,"transformations":[],"bars":false,"fill":1,"grid":{"threshold1":null,"threshold1Color":"rgba(216,
    200, 27, 0.27)","threshold2":null,"threshold2Color":"rgba(234, 112, 112, 0.22)"},"isNew":true,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false,"alignAsTable":false,"hideEmpty":false,"hideZero":false,"rightSide":false,"sideWidth":null,"sort":null,"sortDesc":false},"lines":true,"linewidth":2,"nullPointMode":"connected","options":{"dataLinks":[],"alertThreshold":true},"percentage":false,"pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"stack":false,"steppedLine":false,"tooltip":{"msResolution":true,"shared":true,"sort":0,"value_type":"cumulative"},"thresholds":[],"type":"graph","xaxis":{"mode":"time","name":null,"values":[],"show":true},"yaxes":[{"decimals":null,"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true},{"decimals":null,"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":0}}],"refresh":false,"rows":[],"schemaVersion":12,"sharedCrosshair":false,"style":"dark","tags":[],"templating":{"list":[{"allValue":null,"current":{"selected":true,"tags":[],"text":["All"],"value":["$__all"]},"datasource":"influxdb","hide":0,"includeAll":true,"label":null,"multi":true,"name":"hostname","options":[],"query":"import
    \"influxdata/influxdb/v1\"\nv1.tagValues(\n    bucket: v.bucket,\n    tag: \"host\",\n    predicate:
    (r) => true,\n    start: -1y\n)","refresh":1,"regex":"","skipUrlSync":false,"sort":1,"tagValuesQuery":"","tags":[],"tagsQuery":"","type":"query","useTags":false},{"allValue":null,"current":{"selected":true,"tags":[],"text":["All"],"value":["$__all"]},"datasource":"influxdb","hide":0,"includeAll":true,"label":null,"multi":true,"name":"instance_id","options":[],"query":"import
    \"influxdata/influxdb/v1\"\nv1.tagValues(\n    bucket: v.bucket,\n    tag: \"instance_id\",\n    predicate:
    (r) => true,\n    start: -1y\n)","refresh":1,"regex":"","skipUrlSync":false,"sort":1,"tagValuesQuery":"","tags":[],"tagsQuery":"","type":"query","useTags":false}]},"title":"System
    Dashboard","time":{"from":"now-1h","to":"now"},"timepicker":{"refresh_intervals":["5s","10s","30s","1m","5m","15m","30m","1h","2h","1d"],"time_options":["5m","15m","1h","6h","12h","24h","2d","7d","30d"],"hidden":false},"timezone":"utc","version":0,"uid":"846535"}'
  system_per_process_dashboard.json: '{"__inputs":[],"annotations":{"list":[]},"description":"","editable":true,"gnetId":null,  
    \"snorkel\")\n    |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n    |>
    filter(fn: (r) => r[\"_measurement\"] == \"per_process_cpu_time\")\n    |> keep(columns:
    [\"_time\", \"_value\", \"hostname\", \"pid\"])\n    |> aggregateWindow(every:
    30s, fn: last, createEmpty: false)\n    |> derivative(nonNegative: true)\n    |>
    aggregateWindow(every: v.windowPeriod, fn: mean, createEmpty: false)\n    |> yield(name:
    \"mean\")","resultFormat":"time_series","alias":"","measurement":"","rawQuery":true,"refId":"A"}],"timeFrom":null,"timeShift":null,"title":"Per-process
    CPU Usage","transparent":false,"transformations":[],"aliasColors":{},"bars":false,"fill":0,"grid":{"threshold1":null,"threshold1Color":"rgba(216,
    200, 27, 0.27)","threshold2":null,"threshold2Color":"rgba(234, 112, 112, 0.22)"},"isNew":true,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false,"alignAsTable":false,"hideEmpty":false,"hideZero":false,"rightSide":false,"sideWidth":null,"sort":null,"sortDesc":false},"lines":true,"linewidth":2,"nullPointMode":"connected","options":{"dataLinks":[],"alertThreshold":true},"percentage":false,"pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"stack":false,"steppedLine":false,"tooltip":{"msResolution":true,"shared":true,"sort":0,"value_type":"individual"},"thresholds":[],"type":"graph","xaxis":{"mode":"time","name":null,"values":[],"show":true},"yaxes":[{"decimals":null,"format":"percentunit","label":null,"logBase":1,"max":null,"min":null,"show":true},{"decimals":null,"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":0}},{"cacheTimeout":null,"datasource":null,"description":null,"editable":true,"error":false,"fieldConfig":{"defaults":{"thresholds":{"mode":"absolute","steps":[]}}},"height":null,"gridPos":{"h":8,"w":12,"x":12,"y":0},"hideTimeOverride":false,"id":2,"interval":null,"links":[],"maxDataPoints":null,"minSpan":null,"repeat":null,"repeatDirection":null,"maxPerRow":null,"span":null,"targets":[{"query":"from(bucket:
    \"snorkel\")\n    |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n    |>
    filter(fn: (r) => r[\"_measurement\"] == \"per_process_memory_rss\")\n    |> keep(columns:
    [\"_time\", \"_value\", \"hostname\", \"pid\"])\n    |> aggregateWindow(every:
    v.windowPeriod, fn: mean, createEmpty: false)\n    |> yield(name: \"mean\")","resultFormat":"time_series","alias":"","measurement":"","rawQuery":true,"refId":"A"}],"timeFrom":null,"timeShift":null,"title":"Per-process
    Memory RSS","transparent":false,"transformations":[],"aliasColors":{},"bars":false,"fill":0,"grid":{"threshold1":null,"threshold1Color":"rgba(216,
    200, 27, 0.27)","threshold2":null,"threshold2Color":"rgba(234, 112, 112, 0.22)"},"isNew":true,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false,"alignAsTable":false,"hideEmpty":false,"hideZero":false,"rightSide":false,"sideWidth":null,"sort":null,"sortDesc":false},"lines":true,"linewidth":2,"nullPointMode":"connected","options":{"dataLinks":[],"alertThreshold":true},"percentage":false,"pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"stack":false,"steppedLine":false,"tooltip":{"msResolution":true,"shared":true,"sort":0,"value_type":"individual"},"thresholds":[],"type":"graph","xaxis":{"mode":"time","name":null,"values":[],"show":true},"yaxes":[{"decimals":null,"format":"bytes","label":null,"logBase":1,"max":null,"min":null,"show":true},{"decimals":null,"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":0}},{"cacheTimeout":null,"datasource":null,"description":null,"editable":true,"error":false,"fieldConfig":{"defaults":{"thresholds":{"mode":"absolute","steps":[]}}},"height":null,"gridPos":{"h":8,"w":12,"x":0,"y":8},"hideTimeOverride":false,"id":3,"interval":null,"links":[],"maxDataPoints":null,"minSpan":null,"repeat":null,"repeatDirection":null,"maxPerRow":null,"span":null,"targets":[{"query":"from(bucket:
    \"snorkel\")\n    |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n    |>
    filter(fn: (r) => r[\"_measurement\"] == \"per_process_disk_io_read_bytes\")\n    |>
    keep(columns: [\"_time\", \"_value\", \"hostname\", \"pid\"])\n    |> aggregateWindow(every:
    30s, fn: last, createEmpty: false)\n    |> derivative(nonNegative: true)\n    |>
    aggregateWindow(every: v.windowPeriod, fn: mean, createEmpty: false)\n    |> yield(name:
    \"mean\")","resultFormat":"time_series","alias":"","measurement":"","rawQuery":true,"refId":"A"}],"timeFrom":null,"timeShift":null,"title":"Per-process
    Disk Read","transparent":false,"transformations":[],"aliasColors":{},"bars":false,"fill":0,"grid":{"threshold1":null,"threshold1Color":"rgba(216,
    200, 27, 0.27)","threshold2":null,"threshold2Color":"rgba(234, 112, 112, 0.22)"},"isNew":true,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false,"alignAsTable":false,"hideEmpty":false,"hideZero":false,"rightSide":false,"sideWidth":null,"sort":null,"sortDesc":false},"lines":true,"linewidth":2,"nullPointMode":"connected","options":{"dataLinks":[],"alertThreshold":true},"percentage":false,"pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"stack":false,"steppedLine":false,"tooltip":{"msResolution":true,"shared":true,"sort":0,"value_type":"individual"},"thresholds":[],"type":"graph","xaxis":{"mode":"time","name":null,"values":[],"show":true},"yaxes":[{"decimals":null,"format":"binBps","label":null,"logBase":1,"max":null,"min":null,"show":true},{"decimals":null,"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":0}},{"cacheTimeout":null,"datasource":null,"description":null,"editable":true,"error":false,"fieldConfig":{"defaults":{"thresholds":{"mode":"absolute","steps":[]}}},"height":null,"gridPos":{"h":8,"w":12,"x":12,"y":8},"hideTimeOverride":false,"id":4,"interval":null,"links":[],"maxDataPoints":null,"minSpan":null,"repeat":null,"repeatDirection":null,"maxPerRow":null,"span":null,"targets":[{"query":"from(bucket:
    \"snorkel\")\n    |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n    |>
    filter(fn: (r) => r[\"_measurement\"] == \"per_process_disk_io_write_bytes\")\n    |>
    keep(columns: [\"_time\", \"_value\", \"hostname\", \"pid\"])\n    |> aggregateWindow(every:
    30s, fn: last, createEmpty: false)\n    |> derivative(nonNegative: true)\n    |>
    aggregateWindow(every: v.windowPeriod, fn: mean, createEmpty: false)\n    |> yield(name:
    \"mean\")","resultFormat":"time_series","alias":"","measurement":"","rawQuery":true,"refId":"A"}],"timeFrom":null,"timeShift":null,"title":"Per-process
    Disk Write","transparent":false,"transformations":[],"aliasColors":{},"bars":false,"fill":0,"grid":{"threshold1":null,"threshold1Color":"rgba(216,
    200, 27, 0.27)","threshold2":null,"threshold2Color":"rgba(234, 112, 112, 0.22)"},"isNew":true,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false,"alignAsTable":false,"hideEmpty":false,"hideZero":false,"rightSide":false,"sideWidth":null,"sort":null,"sortDesc":false},"lines":true,"linewidth":2,"nullPointMode":"connected","options":{"dataLinks":[],"alertThreshold":true},"percentage":false,"pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[],"stack":false,"steppedLine":false,"tooltip":{"msResolution":true,"shared":true,"sort":0,"value_type":"individual"},"thresholds":[],"type":"graph","xaxis":{"mode":"time","name":null,"values":[],"show":true},"yaxes":[{"decimals":null,"format":"binBps","label":null,"logBase":1,"max":null,"min":null,"show":true},{"decimals":null,"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":0}}],"refresh":false,"rows":[],"schemaVersion":12,"sharedCrosshair":false,"style":"dark","tags":[],"templating":{"list":[]},"title":"System
    Per-Process Dashboard","time":{"from":"now-1h","to":"now"},"timepicker":{"refresh_intervals":["5s","10s","30s","1m","5m","15m","30m","1h","2h","1d"],"time_options":["5m","15m","1h","6h","12h","24h","2d","7d","30d"],"hidden":false},"timezone":"utc","version":0,"uid":"11e650"}'
kind: ConfigMap
metadata:
  name: grafana-dashboard-json
  namespace: {{ .Values.namespace }}
